<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tarun â€” AI Developer Portfolio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Share+Tech+Mono&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Inter:wght@400;500;600&family=Space+Grotesk:wght@500;700&display=swap"
    rel="stylesheet">
  <style>
    :root {
      /* --- THEME COLORS (CYBERPUNK / TECH) - DEFAULT DARK MODE --- */
      --bg-body: #030306;
      --bg-card: #080810;
      --bg-card-elevated: #0c0c18;
      --text-main: #e0e8f0;
      --text-sub: #7a8a9f;
      --text-code: #b0c0d8;
      --accent: #4d9fff;
      /* Vibrant Electric Blue */
      --accent-bright: #00d4ff;
      /* Cyan highlight */
      --accent-soft: rgba(77, 159, 255, 0.15);
      --accent-glow: rgba(0, 212, 255, 0.3);
      --border: rgba(77, 159, 255, 0.35);
      --border-sub: rgba(77, 159, 255, 0.15);
      --border-nav: rgba(77, 159, 255, 0.25);
      --grid-line: rgba(0, 212, 255, 0.06);

      /* --- FONTS --- */
      --font-serif: 'EB Garamond', Georgia, serif;
      --font-main: 'Inter', sans-serif;
      --font-display: 'Space Grotesk', sans-serif;
      --font-mono-sys: 'Share Tech Mono', monospace;
      --font-mono-code: 'JetBrains Mono', monospace;
      --font-pixel: 'Press Start 2P', cursive;

      /* --- VIZ COLORS --- */
      --winner: #00d4ff;
    }

    [data-theme="light"] {
      --bg-body: #F5F5F0;
      --bg-card: #FAFAF8;
      --text-main: #1a1a1a;
      --text-sub: #505050;
      --text-code: #2a2a2a;
      --accent: #4A6BCC;
      --accent-soft: rgba(74, 107, 204, 0.15);
      --border: #C0C0B8;
      --border-sub: #D8D8D0;
      --border-nav: #C0C0B8;
      --grid-line: rgba(74, 107, 204, 0.25);
      --corner-bracket: #4A6BCC;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: var(--bg-body);
      color: var(--text-main);
      font-family: var(--font-main);
      line-height: 1.6;
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
      transition: background-color 0.3s, color 0.3s;
    }

    /* --------------------
           LAYOUT & HEADER
        -------------------- */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      display: flex;
      align-items: center;
      padding: 0 16px 0 40px;
      background: var(--bg-card);
      z-index: 500;
      border-bottom: 1px solid var(--border);
      box-shadow: 0 2px 20px rgba(0, 212, 255, 0.05);
    }

    .header-brand {
      width: 240px;
      font-family: var(--font-pixel);
      font-size: 16px;
      color: var(--accent);
      letter-spacing: 0;
      text-transform: uppercase;
      font-weight: 400;
      line-height: 1;
      text-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
    }

    .header-status {
      margin-left: auto;
      font-family: var(--font-mono-sys);
      font-size: 11px;
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .page-wrapper {
      padding-top: 60px;
      min-height: 100vh;
      display: flex;
      justify-content: center;
    }

    /* --------------------
           MAIN CONTENT
        -------------------- */
    .main-content {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .article-container {
      width: 100%;
      margin: 0 auto;
      padding: 60px 40px 100px;
    }

    .article-header {
      text-align: center;
      margin-bottom: 48px;
    }

    .article-meta {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1.5px;
      margin-bottom: 20px;
      border-bottom: 1px solid var(--accent);
      padding-bottom: 8px;
      display: inline-block;
    }

    .article-title {
      font-family: var(--font-mono-sys);
      font-size: 3.5rem;
      font-weight: 400;
      line-height: 1.1;
      color: var(--text-main);
      margin-bottom: 24px;
      letter-spacing: -2px;
      text-transform: uppercase;
    }

    .divider {
      width: 44px;
      height: 1px;
      background: #1a1a1a;
      margin: 40px auto;
    }

    /* --------------------
           SECTIONS & CARDS
        -------------------- */
    .content-section {
      margin-bottom: 60px;
    }

    .content-section h2 {
      font-family: var(--font-mono-sys);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--text-sub);
      margin-bottom: 24px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }

    .content-section p {
      font-family: var(--font-serif);
      font-size: 1.15rem;
      line-height: 1.7;
      color: var(--text-main);
      margin-bottom: 24px;
      max-width: 75ch;
    }

    /* Terminal Card (Used for Skills/Experience) */
    .terminal-card {
      border: 1px solid var(--border);
      margin-bottom: 40px;
      background: var(--bg-card);
      border-radius: 2px;
    }

    .terminal-row {
      display: flex;
      border-bottom: 1px solid var(--border);
      padding: 24px 30px;
    }

    .terminal-row:last-child {
      border-bottom: none;
    }

    .terminal-label {
      font-family: var(--font-mono-sys);
      color: var(--text-sub);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      width: 140px;
      flex-shrink: 0;
      padding-top: 4px;
    }

    .terminal-content {
      flex: 1;
    }

    .terminal-content.mono {
      font-family: var(--font-mono-code);
      font-size: 14px;
    }

    .terminal-content.serif {
      font-family: var(--font-serif);
      font-size: 16px;
    }

    .skill-group {
      margin-bottom: 12px;
    }

    .skill-title {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--text-sub);
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    /* --------------------
           NEURAL NETWORK HERO
        -------------------- */
    .nn-hero {
      display: flex;
      flex-wrap: wrap;
      /* Allow metrics to break to new line */
      /* align-items: center; REMOVED to allow top alignment */
      gap: 30px;
      border: 1px solid var(--accent);
      background-color: var(--bg-body);
      background-image:
        linear-gradient(var(--grid-line) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
      background-size: 20px 20px;
      padding: 30px;
      margin-bottom: 40px;
      position: relative;
      /* For tooltip positioning */
    }

    .digit-panel {
      border: 1px solid var(--border);
      background: var(--bg-card);
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      width: 140px;
    }

    canvas {
      background: var(--bg-card);
      border: 1px dashed var(--accent);
      cursor: crosshair;
    }

    .prediction-label {
      font-family: var(--font-mono-sys);
      font-size: 14px;
      color: var(--text-sub);
      text-align: center;
      margin-top: 5px;
    }

    .prediction-value {
      font-family: var(--font-mono-sys);
      font-size: 32px;
      color: var(--accent);
      font-weight: bold;
      text-align: center;
      line-height: 1.2;
    }

    .btn-small-clear {
      background: var(--bg-card);
      border: 1px solid var(--accent);
      color: var(--accent);
      font-family: var(--font-mono-sys);
      font-size: 10px;
      padding: 6px 12px;
      cursor: pointer;
      text-transform: uppercase;
      width: 100%;
      transition: all 0.2s;
    }

    .btn-small-clear:hover {
      background: var(--accent);
      color: var(--bg-card);
    }

    .viz-container {
      flex: 2;
      /* Take up more space */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      min-height: 60vh;
      /* Taller for better centering */
    }

    #nnSvg {
      width: 100%;
      height: 100%;
      max-width: 800px;
      /* Allow it to be bigger */
      max-height: 350px;
      overflow: visible;
    }

    .btn-expand {
      margin-top: 10px;
      background: none;
      border: none;
      cursor: pointer;
      color: var(--text-sub);
      transition: color 0.2s;
    }

    .btn-expand:hover {
      color: var(--accent);
    }

    .btn-expand svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    /* FULLSCREEN HERO MODE */
    .nn-hero.fullscreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9999;
      margin: 0;
      background: var(--bg-body);
      padding: 40px;
      box-sizing: border-box;
      display: grid;
      grid-template-columns: 200px 1fr 300px;
      /* Canvas, Viz, Metrics */
      align-items: center;
      overflow: hidden;
    }

    .nn-hero.fullscreen .metrics-panel {
      display: block !important;
      border: none;
      margin: 0;
      padding: 0;
      background: none;
    }

    .nn-hero.fullscreen #nnSvg {
      max-width: none;
      height: 80vh;
      /* Bigger viz */
      width: 100%;
    }

    .nn-hero.fullscreen .digit-panel {
      transform: scale(1.5);
      /* Bigger input */
    }

    /* METRICS PANEL (Normal) */
    .metrics-panel {
      width: 100%;
      border-top: 1px dashed var(--border);
      padding-top: 20px;
      margin-top: 10px;
      display: none;
      /* Toggled */
    }

    .chart-container {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .bar-row {
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: var(--font-mono-sys);
      font-size: 11px;
    }

    .bar-label {
      width: 15px;
      font-weight: bold;
    }

    .bar-ui {
      flex: 1;
      height: 8px;
      background: var(--border-sub);
      border-radius: 2px;
      overflow: hidden;
    }

    .bar-fill {
      height: 100%;
      background: var(--accent);
      width: 0%;
      transition: width 0.3s;
    }

    .stats-container {
      font-family: var(--font-mono-sys);
      font-size: 12px;
      color: var(--text-sub);
      margin-top: 20px;
      line-height: 1.6;
    }

    .btn-close-fs {
      display: none;
      position: absolute;
      top: 30px;
      right: 30px;
      background: none;
      border: 1px solid var(--accent);
      padding: 8px 16px;
      font-family: var(--font-mono-sys);
      cursor: pointer;
      color: var(--accent);
      text-transform: uppercase;
    }

    .nn-hero.fullscreen .btn-close-fs {
      display: block;
    }

    .nn-hero.fullscreen .btn-expand {
      display: none;
    }

    /* Fullscreen for INTEGRATED Hero NN */
    .nn-hero-integrated.fullscreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9999;
      margin: 0;
      background: var(--bg-body);
      padding: 60px;
      box-sizing: border-box;
      display: grid;
      grid-template-columns: 180px 1fr 280px;
      gap: 40px;
      align-items: center;
      justify-content: center;
      border: none;
      border-radius: 0;
    }

    .nn-hero-integrated.fullscreen .metrics-panel {
      display: flex !important;
      flex-direction: column;
      gap: 15px;
      background: rgba(0, 0, 0, 0.3);
      padding: 20px;
      border: 1px solid var(--border);
      border-radius: 4px;
      max-height: 80vh;
      overflow-y: auto;
    }

    .nn-hero-integrated.fullscreen .chart-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .nn-hero-integrated.fullscreen #nnSvg {
      width: 100%;
      height: 70vh;
      max-width: none;
    }

    .nn-hero-integrated.fullscreen .digit-panel {
      transform: scale(1.4);
      transform-origin: left center;
    }

    .nn-hero-integrated.fullscreen .btn-close-fs {
      display: block !important;
      position: fixed;
      top: 20px;
      right: 30px;
    }

    /* ========================================
       MARKOV CHAIN HERO - FINAL HORIZONTAL SPLIT
       ======================================== */

    .markov-hero-final {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      width: 92%;
      max-width: 1200px;
      background: var(--bg-card);
      border: 1.5px solid var(--accent);
      padding: 96px;
      box-sizing: border-box;
      box-shadow:
        0 0 40px rgba(0, 212, 255, 0.08),
        0 0 80px rgba(77, 159, 255, 0.04);
    }

    [data-theme="light"] .markov-hero-final {
      background: #fff;
      border: 1.5px solid var(--accent);
    }

    /* Main Split: MODEL (left) | TEXT (right) */
    .markov-split-final {
      display: grid;
      grid-template-columns: 360px 1fr;
      gap: 96px;
      align-items: start;
      width: 100%;
    }

    /* LEFT: Model Side */
    .model-side {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      gap: 10px;
      padding: 40px;
      /* Graph paper grid pattern - dark mode with glow */
      background-color: rgba(8, 8, 16, 0.95);
      background-image:
        linear-gradient(rgba(0, 212, 255, 0.08) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 212, 255, 0.08) 1px, transparent 1px);
      background-size: 20px 20px;
      border: 1px solid rgba(77, 159, 255, 0.4);
      box-shadow:
        0 0 30px rgba(0, 212, 255, 0.05),
        inset 0 0 60px rgba(0, 0, 0, 0.3);
      min-width: auto;
      width: 100%;
    }

    [data-theme="light"] .model-side {
      background-color: #fbfdff;
      background-image:
        linear-gradient(rgba(74, 107, 204, 0.12) 1px, transparent 1px),
        linear-gradient(90deg, rgba(74, 107, 204, 0.12) 1px, transparent 1px);
      border: 1px solid rgba(74, 107, 204, 0.2);
      box-shadow: none;
    }

    /* Input Display */
    .input-display {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 0 16px;
      /* Added padding for expansion breathing room */
      min-width: 120px;
      /* Slightly wider default */
      width: auto;
      /* Allow expansion */
      height: 34px;
      background: var(--bg-card);
      /* Opaque background */
      border: 1.8px solid var(--accent);
      /* Bolder border */
      font-family: var(--font-mono-sys);
      font-size: 11px;
      z-index: 2;
      /* Ensure it sits above grid */
      box-shadow: 0 0 15px rgba(0, 212, 255, 0.1);
    }

    [data-theme="light"] .input-display {
      background: #fff;
      border: 1.8px solid var(--accent);
    }

    .input-display.active {
      box-shadow: 0 0 15px var(--accent);
    }

    .input-label {
      color: var(--text-sub);
    }

    .input-word {
      color: var(--accent);
      font-weight: 600;
    }

    /* Arrows */
    .arrow-down,
    .arrow-right-out {
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.4;
      transition: all 0.3s;
    }

    [data-theme="light"] .arrow-down,
    [data-theme="light"] .arrow-right-out {
      opacity: 0.8;
    }

    .arrow-down svg {
      width: 18px;
      height: 25px;
    }

    .arrow-right-out svg {
      width: 40px;
      height: 18px;
    }

    .arrow-down.active,
    .arrow-right-out.active {
      opacity: 1;
      filter: drop-shadow(0 0 8px var(--accent));
    }

    /* Model Box */
    .model-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 15px;
      /* Separate label and button */
      width: 160px;
      height: 140px;
      padding: 0;
      background: var(--bg-card);
      /* Opaque background */
      border: 1.8px solid var(--accent);
      /* Bolder border */
      border-radius: 0;
      z-index: 2;
      /* Ensure it sits above grid */
      transition: all 0.3s;
      position: relative;
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.08);
    }

    .model-icon {
      display: none !important;
    }

    /* Processing Dot - Visual anchor in center */
    .processing-dot {
      width: 6px;
      height: 6px;
      background: var(--accent);
      opacity: 0.2;
      border-radius: 0;
    }

    [data-theme="light"] .model-box {
      background: #fff;
      border: 1.8px solid var(--accent);
      /* Bolder border to match input */
    }

    .model-box.active {
      border-style: solid;
      box-shadow: 0 0 15px var(--accent-soft);
      background: var(--bg-card);
      /* Keep opaque when active */
    }

    /* Black Box & Expansion UI */
    .model-box .info-icon {
      position: absolute;
      top: 6px;
      right: 6px;
      cursor: pointer;
      opacity: 0.5;
      transition: all 0.2s;
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--accent);
    }

    .model-action-row {
      display: flex;
      justify-content: center;
      margin-top: 10px;
      width: 100%;
    }

    .expand-btn {
      position: static;
      /* Let it flow in flex container */
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: transparent;
      border: 1px solid var(--accent);
      color: var(--accent);
      font-family: var(--font-mono-sys);
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
      z-index: 20;
      box-shadow: none;
      margin-top: 5px;
      transform: none;
    }

    [data-theme="light"] .expand-btn {
      background: transparent;
      border: 1px solid var(--accent);
      box-shadow: none;
    }

    .expand-btn:hover {
      background: var(--accent);
      color: #fff;
      transform: scale(1.1);
    }

    .model-box .info-icon:hover,
    .model-box .expand-icon:hover {
      opacity: 1;
    }

    /* Tooltip */
    .latent-tooltip {
      position: absolute;
      bottom: 110%;
      right: 0;
      background: var(--bg-main);
      border: 1px solid var(--accent);
      padding: 6px 10px;
      font-family: var(--font-mono-sys);
      font-size: 9px;
      color: var(--accent);
      white-space: nowrap;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 100;
      box-shadow: 0 0 15px rgba(0, 255, 170, 0.2);
    }

    .info-icon:hover+.latent-tooltip {
      opacity: 1;
    }

    /* ================= EXPANDED SPEC VIEW (Updated) ================= */

    .model-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .model-modal.active {
      display: flex;
    }

    /* blueprint backdrop */
    .model-modal::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        linear-gradient(var(--grid-line) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
      background-size: 28px 28px;
      background-color: var(--bg-main);
      opacity: 0.98;
    }

    /* main sheet */
    .spec-sheet {
      position: relative;
      background: var(--bg-card);
      border: 1.5px solid var(--accent);
      width: 92%;
      max-width: 1280px;
      padding: 48px 56px;
      z-index: 1;
      height: 85vh;
      /* Fixed height for consistent layout */
      display: flex;
      flex-direction: column;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    }

    [data-theme="light"] .spec-sheet {
      background: #fff;
    }

    /* header */
    .spec-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-bottom: 24px;
      border-bottom: 1px solid var(--grid-line);
      font-family: var(--font-mono-sys);
      font-size: 11px;
      letter-spacing: 2px;
      color: var(--accent);
      flex-shrink: 0;
    }

    .spec-header .close {
      font-size: 28px;
      cursor: pointer;
      line-height: 1;
      opacity: 0.7;
      transition: opacity 0.2s;
    }

    .spec-header .close:hover {
      opacity: 1;
    }

    /* body */
    .spec-body {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 64px;
      padding-top: 40px;
      flex: 1;
      overflow: hidden;
      /* Prevent body scroll, use inner scroll if needed */
    }

    /* left column */
    .spec-left {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .spec-left p {
      font-size: 1.15rem;
      /* Larger instruction text */
      line-height: 1.6;
      margin-bottom: 32px;
      color: var(--text-main);
      font-family: var(--font-serif);
    }

    .model-modal .label {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      letter-spacing: 2px;
      color: var(--accent);
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      text-transform: uppercase;
    }

    .model-modal textarea {
      width: 100%;
      flex: 1;
      /* Take available space */
      min-height: 200px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-main);
      font-family: var(--font-mono-sys);
      font-size: 11px;
      padding: 16px;
      margin-bottom: 32px;
      resize: none;
      outline: none;
      line-height: 1.5;
    }

    [data-theme="light"] .model-modal textarea {
      background: #fff;
      border: 1px solid #e0e0e0;
    }

    .model-modal textarea:focus {
      border-color: var(--accent);
    }

    .input-row {
      display: flex;
      gap: 24px;
      /* Move gap to space items out */
      align-items: center;
      margin-bottom: 48px;
    }

    .seed-group {
      display: flex;
      align-items: center;
      border: 1px solid var(--border);
      background: transparent;
      padding: 0;
      height: 40px;
      width: 200px;
    }

    [data-theme="light"] .seed-group {
      border: 1px solid #e0e0e0;
      background: #fff;
    }

    .seed-group .label-seed {
      padding: 0 12px;
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--accent);
      letter-spacing: 1px;
      border-right: 1px solid var(--border);
      height: 100%;
      display: flex;
      align-items: center;
    }

    [data-theme="light"] .seed-group .label-seed {
      border-right: 1px solid #e0e0e0;
    }

    .model-modal input {
      border: none;
      background: transparent;
      color: var(--text-main);
      padding: 0 12px;
      font-family: var(--font-serif);
      /* Seed text in Serif */
      font-size: 1.1rem;
      outline: none;
      width: 100%;
      height: 100%;
    }



    .model-modal input:focus {
      border-color: var(--accent);
    }

    .model-modal button {
      border: 1px solid var(--accent);
      background: transparent;
      padding: 0 24px;
      height: 40px;
      font-family: var(--font-mono-sys);
      cursor: pointer;
      color: var(--accent);
      text-transform: uppercase;
      font-size: 11px;
      letter-spacing: 1px;
      transition: all 0.2s;
    }

    .model-modal button:hover {
      background: var(--accent);
      color: #fff;
    }

    /* Modal Fast Forward Button - specialized styles */
    .model-modal .modal-ff-btn {
      margin-top: 0;
      padding: 8px 14px;
      height: 40px;
      background: var(--bg-card);
      border: 1.5px solid var(--accent);
      color: var(--accent);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.06);
      transition: transform 0.08s ease-out, box-shadow 0.08s ease-out, background 0.12s ease-out;
    }

    .model-modal .modal-ff-btn:hover {
      background: var(--bg-card);
      color: var(--accent);
      box-shadow: 0 4px 15px rgba(0, 212, 255, 0.15);
    }

    .model-modal .modal-ff-btn:active {
      transform: translateY(2px);
      box-shadow: inset 0 2px 6px rgba(74, 107, 204, 0.35);
    }

    .model-modal .modal-ff-btn.active {
      background: rgba(0, 212, 255, 0.1);
      transform: translateY(1.5px);
      box-shadow:
        inset 0 2px 6px rgba(0, 212, 255, 0.2),
        0 0 15px rgba(0, 212, 255, 0.15);
    }

    .model-modal .status {
      display: none;
      /* Hide the status section */
    }

    .model-modal .status div {
      display: none;
    }

    /* RIGHT COLUMN - PREVIEW */
    .preview-label {
      font-family: var(--font-mono-sys);
      font-size: 11px;
      letter-spacing: 2px;
      color: var(--accent);
      margin-bottom: 32px;
      text-transform: uppercase;
    }

    .flow {
      display: flex;
      align-items: center;
      gap: 32px;
      margin-bottom: 48px;
      font-family: var(--font-mono-sys);
      font-size: 11px;
      color: var(--accent);
    }

    .flow .box {
      border: 1px solid var(--accent);
      padding: 0 24px;
      color: var(--accent);
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 48px;
      min-width: 140px;
      position: relative;
      transition: all 0.2s;
    }

    .flow .box br {
      display: none;
    }

    /* ANIMATION STATES FOR JS */
    /* When input/processing is active */
    .flow .box.active {
      background: var(--accent);
      color: #fff;
      border-color: var(--accent);
    }

    .flow .box.active .input-label {
      /* Style inner span if needed */
      color: rgba(255, 255, 255, 0.8);
    }

    .flow .arrow {
      color: var(--accent);
      opacity: 1;
      font-size: 24px;
      font-weight: bold;
      transition: all 0.2s;
    }

    .flow .arrow.active {
      opacity: 1;
      transform: translateX(5px);
      color: var(--accent);
    }

    .processing-dot.active {
      animation: blinkAction 0.5s infinite;
      opacity: 1 !important;
      background: #fff !important;
      /* White dot on blue bg */
    }

    @keyframes blinkAction {
      0% {
        opacity: 0;
      }

      50% {
        opacity: 1;
      }

      100% {
        opacity: 0;
      }
    }


    /* INPUT BOX SPECIFIC */
    #modalInputDisplay {
      justify-content: flex-start;
      /* Align text left */
      font-family: var(--font-mono-sys);
    }

    .input-label {
      margin-right: 12px;
      color: var(--accent);
      opacity: 0.7;
    }

    #modalInputDisplay.active .input-label {
      color: rgba(255, 255, 255, 0.8);
    }

    /* OUTPUT TEXT */
    .modal-output {
      font-size: 2rem;
      /* Large output text */
      line-height: 1.4;
      border-left: 1.5px solid var(--accent);
      padding-left: 32px;
      color: var(--text-main) !important;
      font-family: var(--font-serif);
      min-height: 100px;
      display: flex;
      flex-wrap: wrap;
      gap: 0.25em;
      margin-top: 20px;
    }

    [data-theme="light"] .modal-output {
      color: #000 !important;
    }

    .modal-output .gen-word-body {
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s ease;
    }

    .modal-output .gen-word-body.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* responsive */
    @media(max-width: 900px) {
      .spec-sheet {
        padding: 56px 28px;
        height: auto;
        max-height: 90vh;
        overflow-y: auto;
        display: block;
      }

      .spec-body {
        grid-template-columns: 1fr;
        gap: 40px;
        padding-bottom: 40px;
      }

      .spec-left {
        height: auto;
      }
    }

    /* Tech Callouts (Reference Style) */
    .tech-callout {
      position: absolute;
      pointer-events: none;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .callout-line {
      height: 1px;
      background: var(--accent);
      opacity: 0.3;
    }

    .callout-label {
      font-family: var(--font-mono-sys);
      font-size: 8px;
      color: var(--accent);
      opacity: 0.6;
      white-space: nowrap;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .model-icon {
      width: 60px;
      height: 60px;
    }

    .model-label {
      font-family: var(--font-mono-sys);
      font-size: 9px;
      color: var(--accent);
      letter-spacing: 1px;
    }

    .processing-dot {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
      opacity: 0;
    }

    .processing-dot.active {
      opacity: 1;
      animation: pulse 0.3s ease-in-out infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.5);
      }
    }

    /* ================= FAST-FORWARD BUTTON ================= */

    .fastforward-btn {
      margin-top: 30px;
      background: var(--bg-card);
      border: 1.5px solid var(--accent);
      color: var(--accent);
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;

      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;

      z-index: 10;

      /* raised (not pressed) */
      transform: translateY(0);
      box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.2),
        0 0 15px rgba(0, 212, 255, 0.1);

      transition:
        transform 0.08s ease-out,
        box-shadow 0.08s ease-out,
        background 0.12s ease-out,
        border-color 0.12s ease-out;
    }

    .fastforward-btn .feedback-label {
      font-family: var(--font-mono-sys);
      font-size: 8px;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    /* Light theme safety */
    [data-theme="light"] .fastforward-btn {
      background: #fff;
      border-color: var(--accent);
    }

    [data-theme="light"] .fastforward-btn:hover {
      background: #fff;
    }

    [data-theme="light"] .fastforward-btn.active {
      background: #e8ecf8;
    }

    /* ================= HOVER (still raised) ================= */

    .fastforward-btn:hover {
      background: var(--bg-card);
      border-color: var(--accent);

      box-shadow:
        0 4px 10px rgba(74, 107, 204, 0.18);
    }

    /* ================= MOUSE DOWN (physical press) ================= */

    .fastforward-btn:active {
      transform: translateY(2px);

      box-shadow:
        inset 0 2px 6px rgba(74, 107, 204, 0.35),
        inset 0 -1px 2px rgba(255, 255, 255, 0.2);
    }

    /* ================= TOGGLED / ACTIVE (pressed state) ================= */

    .fastforward-btn.active {
      background: rgba(0, 212, 255, 0.1);
      color: var(--accent);
      border: 1.5px solid var(--accent);

      /* stays pressed */
      transform: translateY(1.5px);

      box-shadow:
        inset 0 2px 6px rgba(0, 212, 255, 0.2),
        0 0 20px rgba(0, 212, 255, 0.15);
    }

    /* ================= FEEDBACK LOOP (engaged, vibrating) ================= */

    .fastforward-btn.feedback-active {
      border-color: var(--accent);

      box-shadow:
        0 0 6px rgba(74, 107, 204, 0.35),
        inset 0 1px 3px rgba(74, 107, 204, 0.2);
    }

    /* ================= LABEL ================= */

    .feedback-label {
      font-family: var(--font-mono-sys);
      font-size: 8px;
      color: inherit;
      letter-spacing: 1px;
    }

    /* RIGHT: Text Side */
    /* RIGHT: Text Side */
    .text-side {
      width: 100%;
      max-width: 520px;
      padding: 0;
      background: transparent;
      border: none;
      min-height: auto;
    }

    [data-theme="light"] .text-side {
      background: transparent;
      border: none;
      box-shadow: none;
    }

    /* LABELS */
    .diagram-label,
    .text-header-label {
      font-family: var(--font-mono-sys);
      font-size: 11px;
      letter-spacing: 2px;
      color: var(--accent);
      margin-bottom: 24px;
      text-transform: uppercase;
      border: none;
      padding: 0;
      opacity: 1;
      width: auto;
      display: block;
      text-shadow: 0 0 15px rgba(0, 212, 255, 0.25);
    }

    .text-header-label::before {
      display: none;
    }

    [data-theme="light"] .text-header-label {
      opacity: 1;
      color: var(--accent);
      border: none;
    }

    /* Model Label (BLACK BOX) */
    .model-label {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--accent);
      margin-top: 10px;
    }

    /* Background Grid Pattern */
    .hero-bg-pattern {
      position: absolute;
      inset: 0;
      background:
        linear-gradient(var(--grid-line) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
      background-size: 28px 28px;
      z-index: 0;
      opacity: 0.6;
      pointer-events: none;
    }

    .generated-text {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35em;
      /* Use em gap for natural text flow feel */
      align-items: baseline;
      width: 100%;
    }

    .gen-word {
      font-family: var(--font-serif);
      font-size: 1.15rem;
      line-height: 1.7;
      color: var(--text-main);
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.4s ease-out;
    }

    /* Title style - Tarun */
    .gen-word-title {
      font-family: var(--font-serif);
      font-size: 3rem;
      line-height: 1.1;
      font-weight: 400;
      color: var(--text-main);
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.4s ease-out;
      margin-bottom: 10px;
      width: 100%;
      /* Force new line */
      text-shadow: 0 0 30px rgba(0, 212, 255, 0.15);
    }

    /* Subtitle style */
    .gen-word-subtitle {
      font-family: var(--font-serif);
      font-size: 3rem;
      /* Match H1 size */
      line-height: 1.1;
      font-weight: 400;
      color: var(--text-main);
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.4s ease-out;
      display: inline;
      text-shadow: 0 0 30px rgba(0, 212, 255, 0.15);
    }

    /* First subtitle word creates the line break */
    .gen-word-subtitle:first-of-type {
      display: inline;
      margin-top: 0;
    }

    /* Body text style - smaller description */
    .gen-word-body {
      font-family: var(--font-serif);
      font-size: 1.15rem;
      line-height: 1.7;
      color: var(--text-main);
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.4s ease-out;
    }

    .gen-word.visible {
      opacity: 1;
      transform: translateX(0);
    }

    /* Ensure text is distinct black in light mode */
    [data-theme="light"] .gen-word,
    [data-theme="light"] .gen-word-title,
    [data-theme="light"] .gen-word-subtitle,
    [data-theme="light"] .gen-word-body {
      color: #050505 !important;
      font-weight: 500;
      text-shadow: none;
      opacity: 1;
      /* Force opacity for safety */
    }

    /* Make all word types visible when they have the .visible class */
    .gen-word-title.visible,
    .gen-word-subtitle.visible,
    .gen-word-body.visible {
      opacity: 1;
      transform: translateX(0);
    }

    .gen-word.highlight {
      color: var(--accent);
      text-shadow: 0 0 15px var(--accent);
    }

    .cursor-blink {
      font-family: var(--font-main);
      font-size: 1.2rem;
      animation: blink 1s step-end infinite;
      color: var(--accent);
    }

    @keyframes blink {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0;
      }
    }

    /* Floating Word for Animation */
    .floating-word {
      position: fixed;
      font-family: var(--font-main);
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--accent);
      pointer-events: none;
      z-index: 100;
      opacity: 0;
      transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .floating-word.visible {
      opacity: 1;
    }

    /* TOOLTIP */
    #nn-tooltip {
      position: absolute;
      background: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-family: var(--font-mono-sys);
      font-size: 10px;
      pointer-events: none;
      top: 0;
      left: 0;
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 10;
      white-space: pre-line;
      border: 1px solid var(--border);
    }

    .neuron {
      fill: var(--bg-card);
      stroke: var(--accent);
      stroke-width: 1.5px;
      opacity: 0.4;
      transition: fill 0.1s;
      cursor: pointer;
      /* Signal interactivity */
    }

    .neuron.active {
      fill: var(--accent);
      opacity: 0.8;
    }

    .neuron:hover {
      stroke: var(--text-main);
      stroke-width: 2px;
      opacity: 1 !important;
    }

    .neuron.winner {
      fill: var(--winner);
      stroke: var(--accent);
      stroke-width: 2.5px;
      filter: drop-shadow(0 0 3px var(--winner));
    }

    .edge {
      stroke: rgba(31, 92, 255, 0.3);
      stroke-width: 0.8px;
      opacity: 0.1;
      /* Lower default opacity for real lines */
      transition: all 0.3s;
    }

    .edge.active {
      stroke: var(--accent);
      opacity: 0.5;
    }

    .edge:hover {
      stroke: var(--text-main);
      stroke-width: 2px;
      opacity: 1 !important;
    }

    .btn-train {
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      font-family: var(--font-mono-sys);
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-train:hover {
      filter: brightness(1.1);
      box-shadow: 0 0 10px rgba(31, 92, 255, 0.3);
    }

    .lc-annotation {
      font-family: var(--font-mono-sys);
      font-size: 9px;
      color: var(--text-sub);
      text-transform: uppercase;
      opacity: 0;
      transition: opacity 0.5s ease;
      pointer-events: none;
    }

    .lc-annotation.visible {
      opacity: 0.6;
    }

    .loop-indicator {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--accent);
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
      opacity: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    .loop-active .loop-indicator {
      animation: loopPulse 1.5s infinite;
    }

    @keyframes loopPulse {

      0%,
      100% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9);
      }

      50% {
        opacity: 0.8;
        transform: translate(-50%, -50%) scale(1.1);
      }
    }

    .lc-analogy-box {
      margin-top: 30px;
      padding: 20px;
      border-left: 2px solid var(--accent);
      background: rgba(31, 92, 255, 0.03);
      font-family: var(--font-serif);
      font-size: 16px;
      color: var(--text-main);
      line-height: 1.5;
    }

    /* --------------------
           EXPERIENCE VISUALIZATIONS (NN + GIT)
        -------------------- */
    .experience-section {
      background-color: var(--bg-body);
      background-image:
        linear-gradient(var(--grid-line) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
      background-size: 20px 20px;
      padding: 80px 0;
      margin-top: 60px;
      position: relative;
      color: var(--text-main);
      overflow: hidden;
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
    }

    .exp-header {
      border: 1px solid var(--accent);
      display: inline-block;
      padding: 6px 20px;
      margin-bottom: 30px;
      margin-left: 40px;
      background: white;
      box-shadow: 4px 4px 0px var(--grid-line);
    }

    .exp-header h2 {
      font-family: var(--font-mono-sys);
      font-size: 16px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 2px;
      border: none;
      margin: 0;
      padding: 0;
    }

    .viz-tabs {
      display: flex;
      gap: 15px;
      margin: 0 40px 40px 40px;
    }

    .viz-tab {
      font-family: var(--font-mono-sys);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 8px 16px;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-sub);
      cursor: pointer;
      transition: all 0.2s;
    }

    .viz-tab.active {
      background: white;
      border-color: var(--accent);
      color: var(--accent);
      box-shadow: 2px 2px 0px var(--grid-line);
    }

    .viz-tab:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .viz-container {
      width: 100%;
      height: 450px;
      position: relative;
      display: none;
    }

    .viz-container.active {
      display: block;
    }

    #nnSvg,
    #gitSvg {
      width: 100%;
      height: 100%;
    }

    /* Neural Network Styles */
    .nn-layer {
      cursor: pointer;
      transition: all 0.3s;
    }

    .nn-node {
      fill: white;
      stroke: var(--accent);
      stroke-width: 1;
      transition: all 0.3s;
    }

    .nn-layer:hover .nn-node {
      fill: var(--accent);
      stroke-width: 2;
    }

    .nn-connection {
      stroke: var(--grid-line);
      stroke-width: 0.5;
      opacity: 0.3;
      transition: all 0.3s;
    }

    .nn-connection.active {
      stroke: var(--accent);
      stroke-width: 1;
      opacity: 0.8;
    }

    .nn-label {
      font-family: var(--font-mono-sys);
      font-size: 11px;
      fill: var(--text-main);
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: pointer;
    }

    .nn-year {
      font-family: var(--font-mono-sys);
      font-size: 9px;
      fill: var(--text-sub);
      letter-spacing: 1px;
    }

    /* Git Graph Styles */
    .git-branch {
      stroke-width: 2;
      fill: none;
      transition: all 0.3s;
    }

    .git-branch.ml {
      stroke: var(--accent);
    }

    .git-branch.infra {
      stroke: var(--winner);
    }

    .git-branch.opensource {
      stroke: #9b59b6;
    }

    .git-commit {
      cursor: pointer;
      transition: all 0.3s;
    }

    .git-commit circle {
      fill: white;
      stroke-width: 2;
      transition: all 0.3s;
    }

    .git-commit:hover circle {
      r: 8;
      filter: drop-shadow(0 0 4px currentColor);
    }

    .git-label {
      font-family: var(--font-mono-sys);
      font-size: 13px !important;
      fill: var(--text-main);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 700 !important;
    }

    .git-date {
      font-family: var(--font-mono-sys);
      font-size: 11px !important;
      fill: var(--text-sub);
      font-weight: 600 !important;
      letter-spacing: 0.5px;
    }

    .git-legend {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* ===================== DEV LOGS INDEX SECTION ===================== */
    .dev-logs-index-section {
      width: 100%;
      background-color: var(--bg-body);
      background-image:
        linear-gradient(var(--grid-line) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
      background-size: 20px 20px;
      padding: 80px 0;
      margin-top: 60px;
      position: relative;
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
      overflow: hidden;
    }

    .dev-logs-index-container {
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 40px 80px;
    }

    .dev-logs-index-header {
      text-align: center;
      margin-bottom: 60px;
      padding-bottom: 40px;
      border-bottom: 1px solid var(--border);
    }

    .dev-logs-index-title {
      font-family: var(--font-mono-sys);
      font-size: 12px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 3px;
      margin-bottom: 16px;
    }

    .dev-logs-index-subtitle {
      font-family: var(--font-serif);
      font-size: 2.5rem;
      color: var(--text-main);
      line-height: 1.2;
      opacity: 0.9;
    }

    .dev-logs-index-description {
      font-family: var(--font-serif);
      font-size: 1.1rem;
      color: var(--text-sub);
      max-width: 600px;
      margin: 24px auto 40px;
      line-height: 1.7;
    }

    /* Quick Stats */
    .dev-logs-quick-stats {
      display: flex;
      justify-content: center;
      gap: 60px;
      margin-bottom: 60px;
      padding: 24px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      flex-wrap: wrap;
    }

    .stat-box {
      text-align: center;
      min-width: 120px;
    }

    .stat-box-value {
      font-family: var(--font-mono-sys);
      font-size: 2.5rem;
      color: var(--accent);
      line-height: 1;
      margin-bottom: 8px;
    }

    .stat-box-label {
      font-family: var(--font-mono-sys);
      font-size: 9px;
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Categories Grid */
    .dev-logs-categories-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 32px;
      margin-bottom: 60px;
    }

    .category-index-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      padding: 32px;
      transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
      position: relative;
      overflow: hidden;
    }

    .category-index-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 3px;
      height: 100%;
      background: var(--border);
      transition: all 0.3s;
    }

    .category-index-card:hover {
      border-color: var(--accent);
      transform: translateX(8px);
      box-shadow: 0 8px 30px rgba(0, 212, 255, 0.08);
    }

    .category-index-card:hover::before {
      background: var(--accent);
    }

    .category-number {
      font-family: var(--font-mono-sys);
      font-size: 48px;
      color: var(--accent);
      opacity: 0.2;
      line-height: 1;
      font-weight: 400;
      margin-bottom: 16px;
    }

    .category-name {
      font-family: var(--font-mono-sys);
      font-size: 18px;
      color: var(--text-main);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 12px;
    }

    .category-description {
      font-family: var(--font-serif);
      font-size: 1rem;
      color: var(--text-sub);
      line-height: 1.6;
      margin-bottom: 24px;
    }

    /* Topic Preview List */
    .topic-preview-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .topic-preview-item {
      display: flex;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid var(--border-sub);
      transition: all 0.2s;
      cursor: pointer;
    }

    .topic-preview-item:last-child {
      border-bottom: none;
    }

    .topic-preview-item:hover {
      padding-left: 8px;
      background: var(--accent-soft);
    }

    .topic-number {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
      width: 80px;
      flex-shrink: 0;
      opacity: 0.7;
    }

    .topic-name {
      font-family: var(--font-serif);
      font-size: 1rem;
      color: var(--text-main);
      flex: 1;
      line-height: 1.5;
    }

    .topic-status {
      font-family: var(--font-mono-sys);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 4px 10px;
      border-radius: 2px;
      flex-shrink: 0;
    }

    .topic-status.complete {
      background: rgba(0, 212, 255, 0.15);
      color: var(--accent);
    }

    .topic-status.wip {
      background: rgba(255, 165, 0, 0.15);
      color: #ffa500;
    }

    .topic-status.planned {
      background: var(--border);
      color: var(--text-sub);
    }

    /* View All Link */
    .view-all-link {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      font-family: var(--font-mono-sys);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--accent);
      text-decoration: none;
      padding: 16px 32px;
      background: var(--bg-card);
      border: 1px solid var(--accent);
      transition: all 0.3s;
      margin-top: 24px;
    }

    .view-all-link:hover {
      background: var(--accent);
      color: var(--bg-body);
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
      transform: translateY(-2px);
    }

    .view-all-link svg {
      transition: transform 0.3s;
    }

    .view-all-link:hover svg {
      transform: translateX(4px);
    }

    /* Footer CTA Section */
    .dev-logs-footer-cta {
      text-align: center;
      padding: 60px 0;
      border-top: 1px solid var(--border);
      margin-top: 40px;
    }

    .dev-logs-footer-cta p {
      font-family: var(--font-serif);
      font-size: 1.1rem;
      color: var(--text-sub);
      margin-bottom: 24px;
      line-height: 1.7;
    }

    /* Responsive for Dev Logs Index */
    @media (max-width: 1024px) {
      .dev-logs-categories-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }

      .dev-logs-quick-stats {
        gap: 30px;
        padding: 24px;
      }

      .stat-box-value {
        font-size: 2rem;
      }
    }

    @media (max-width: 768px) {
      .dev-logs-categories-grid {
        grid-template-columns: 1fr;
      }

      .dev-logs-index-subtitle {
        font-size: 2rem;
      }

      .category-number {
        font-size: 36px;
      }

      .topic-preview-item {
        flex-wrap: wrap;
        gap: 8px;
      }

      .topic-number {
        width: auto;
      }

      .view-all-link {
        width: 100%;
        justify-content: center;
      }
    }

    /* ===================== BLOGS SECTION ===================== */
    .blogs-section {
      width: 100%;
      background-color: var(--bg-body);
      background-image:
        linear-gradient(var(--grid-line) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
      background-size: 20px 20px;
      padding: 80px 0;
      margin-top: 60px;
      position: relative;
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
      overflow: hidden;
    }

    .blogs-container {
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 40px 80px;
    }

    .blogs-header {
      text-align: center;
      margin-bottom: 60px;
      padding: 0 0 40px 0;
      border-bottom: 1px solid var(--border);
    }

    .blogs-title {
      font-family: var(--font-mono-sys);
      font-size: 12px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 3px;
      margin-bottom: 16px;
    }

    .blogs-subtitle {
      font-family: var(--font-serif);
      font-size: 2.5rem;
      color: var(--text-main);
      line-height: 1.2;
      opacity: 0.9;
      margin-bottom: 16px;
    }

    .blogs-description {
      font-family: var(--font-serif);
      font-size: 1.1rem;
      color: var(--text-sub);
      max-width: 600px;
      margin: 0 auto 24px;
      line-height: 1.7;
    }

    /* Featured Blog */
    .featured-blog {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      margin-bottom: 60px;
      padding: 40px;
      background: var(--bg-card);
      border: 1px solid var(--accent);
    }

    .featured-blog-image {
      width: 100%;
      height: 350px;
      background: var(--bg-body);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-mono-sys);
      font-size: 11px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 2px;
      opacity: 0.3;
    }

    .featured-blog-content {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .featured-blog-tag {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 4px 12px;
      background: var(--accent-soft);
      border-radius: 2px;
      align-self: flex-start;
      margin-bottom: 16px;
    }

    .featured-blog-title {
      font-family: var(--font-serif);
      font-size: 2rem;
      color: var(--text-main);
      line-height: 1.3;
      margin-bottom: 16px;
    }

    .featured-blog-excerpt {
      font-family: var(--font-serif);
      font-size: 1.1rem;
      color: var(--text-sub);
      line-height: 1.7;
      margin-bottom: 24px;
    }

    .featured-blog-meta {
      display: flex;
      align-items: center;
      gap: 20px;
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 24px;
    }

    .featured-blog-meta .date {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .featured-blog-meta .read-time {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .read-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: var(--font-mono-sys);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--accent);
      text-decoration: none;
      padding: 10px 20px;
      background: transparent;
      border: 1px solid var(--accent);
      transition: all 0.3s;
      margin-top: 8px;
      align-self: flex-start;
    }

    .read-link:hover {
      background: var(--accent);
      color: var(--bg-body);
      transform: translateX(4px);
    }

    .read-link svg {
      transition: transform 0.3s;
    }

    .read-link:hover svg {
      transform: translateX(2px);
    }

    /* Blog Posts Grid */
    .blogs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
      gap: 32px;
      margin-bottom: 60px;
    }

    .blog-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      padding: 32px;
      transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .blog-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 3px;
      height: 100%;
      background: var(--border);
      transition: all 0.3s;
    }

    .blog-card:hover {
      border-color: var(--accent);
      transform: translateX(8px);
      box-shadow: 0 8px 30px rgba(0, 212, 255, 0.08);
    }

    .blog-card:hover::before {
      background: var(--accent);
    }

    .blog-tag {
      font-family: var(--font-mono-sys);
      font-size: 9px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 4px 10px;
      background: var(--accent-soft);
      border-radius: 2px;
      align-self: flex-start;
      margin-bottom: 16px;
    }

    .blog-title {
      font-family: var(--font-serif);
      font-size: 1.4rem;
      color: var(--text-main);
      line-height: 1.4;
      margin-bottom: 12px;
    }

    .blog-excerpt {
      font-family: var(--font-serif);
      font-size: 1rem;
      color: var(--text-sub);
      line-height: 1.6;
      margin-bottom: 20px;
      flex: 1;
    }

    .blog-meta {
      display: flex;
      align-items: center;
      gap: 16px;
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: auto;
      margin-bottom: 20px;
    }

    .blog-meta .date {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .blog-meta .read-time {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .blog-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: var(--font-mono-sys);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--accent);
      text-decoration: none;
      padding: 8px 16px;
      background: transparent;
      border: 1px solid var(--border);
      transition: all 0.2s;
      margin-top: 8px;
      align-self: flex-start;
    }

    .blog-link:hover {
      border-color: var(--accent);
      background: var(--accent);
      color: var(--bg-body);
    }

    .blog-link svg {
      transition: transform 0.2s;
    }

    .blog-link:hover svg {
      transform: translateX(2px);
    }

    /* Filter Tabs */
    .blog-filters {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }

    .blog-filter-btn {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
      padding: 10px 20px;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-sub);
      cursor: pointer;
      transition: all 0.2s;
      border-radius: 2px;
    }

    .blog-filter-btn:hover,
    .blog-filter-btn.active {
      border-color: var(--accent);
      color: var(--accent);
      background: var(--accent-soft);
    }

    /* Blog Stats */
    .blogs-stats {
      display: flex;
      justify-content: center;
      gap: 60px;
      margin-bottom: 40px;
      padding: 24px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      flex-wrap: wrap;
    }

    /* Responsive for Blogs */
    @media (max-width: 1024px) {
      .featured-blog {
        grid-template-columns: 1fr;
        gap: 24px;
      }

      .featured-blog-image {
        height: 250px;
      }

      .blogs-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }

      .blogs-stats {
        gap: 30px;
        padding: 20px;
      }
    }

    @media (max-width: 768px) {
      .blogs-grid {
        grid-template-columns: 1fr;
      }

      .blogs-subtitle {
        font-size: 2rem;
      }

      .featured-blog-title {
        font-size: 1.6rem;
      }

      .blog-title {
        font-size: 1.2rem;
      }
    }


    /* --- GIT GRAPH ANIMATIONS --- */
    @keyframes drawLine {
      to {
        stroke-dashoffset: 0;
      }
    }

    @keyframes fadeInNode {
      from {
        opacity: 0;
        transform: scale(0);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes zoomOutGraph {
      from {
        transform: scale(2.5);
        transform-origin: 150px 400px;
      }

      to {
        transform: scale(1);
        transform-origin: 150px 400px;
      }
    }

    .git-path-anim {
      /* Stroke-dasharray set by JS */
      animation: drawLine 1.5s ease-out forwards;
    }

    .git-node-anim {
      opacity: 0;
      transform-box: fill-box;
      transform-origin: center;
      animation: fadeInNode 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }

    #gitSvg.zooming {
      animation: zoomOutGraph 2s cubic-bezier(0.25, 1, 0.5, 1) forwards;
    }

    /* Shared Info Card */
    .exp-info-card {
      position: absolute;
      background: white;
      border: 1px solid var(--accent);
      padding: 24px;
      border-radius: 0;
      width: 360px;
      box-shadow: 8px 8px 0px var(--grid-line);
      opacity: 0;
      transform: translateY(15px);
      transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
      pointer-events: none;
      z-index: 1000;
    }

    .exp-info-card.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: all;
    }

    .exp-info-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      border-bottom: 0.5px solid var(--border);
      margin-bottom: 12px;
      padding-bottom: 8px;
    }

    .exp-info-title {
      font-family: var(--font-mono-sys);
      font-size: 13px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin: 0;
    }

    .exp-info-meta {
      font-family: var(--font-mono-sys);
      font-size: 9px;
      color: var(--text-sub);
    }

    .exp-info-desc {
      font-family: var(--font-mono-code);
      font-size: 11px;
      line-height: 1.6;
      color: var(--text-main);
    }

    .learning-curve-card {
      background: var(--bg-card);
      border-radius: 8px;
      padding: 20px;
      box-shadow: var(--shadow);
      margin-top: 40px;
      position: relative;
    }

    .learning-curve-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 20px;
    }

    .lc-title {
      font-family: var(--font-mono-sys);
      color: var(--text-main);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .graph-container {
      position: relative;
      width: 100%;
      height: 250px;
      margin-top: 20px;
      background: var(--bg-card-dark);
      border-radius: 4px;
      overflow: hidden;
    }

    #learningCurveSvg {
      width: 100%;
      height: 100%;
    }

    .curve-path {
      fill: none;
      stroke: var(--accent);
      stroke-width: 2px;
      stroke-dasharray: 1000;
      /* Needs to be longer than path */
      stroke-dashoffset: 1000;
    }

    @keyframes drawCurve {
      to {
        stroke-dashoffset: 0;
      }
    }

    .grid-lines line {
      stroke: var(--border);
      stroke-width: 0.5px;
    }

    .axis-label {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      fill: var(--text-sub);
    }

    .data-point {
      fill: var(--accent);
      stroke: white;
      stroke-width: 1.5px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .data-point:hover {
      fill: var(--accent);
      stroke: var(--accent);
      stroke-width: 3px;
      transform: scale(1.2);
    }

    .lc-tooltip {
      position: absolute;
      background: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      font-family: var(--font-mono-sys);
      font-size: 10px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 10;
      white-space: pre-line;
      border: 1px solid #444;
      max-width: 200px;
      text-align: center;
    }

    .lc-tooltip.visible {
      opacity: 1;
    }

    .training-log {
      background: var(--bg-card-dark);
      border-radius: 4px;
      padding: 10px;
      margin-top: 20px;
      font-family: var(--font-mono-sys);
      font-size: 10px;
      color: var(--text-sub);
      height: 80px;
      overflow-y: auto;
      line-height: 1.5;
    }

    .training-log div {
      margin-bottom: 2px;
    }

    /* --------------------
           FOOTER
        -------------------- */
    .nav-footer {
      display: flex;
      justify-content: center;
      gap: 20px;
      padding: 40px 0;
      border-top: 1px solid var(--border);
      margin-top: 60px;
    }

    .nav-footer a {
      font-family: var(--font-mono-sys);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--text-sub);
      text-decoration: none;
      padding: 12px 20px;
      border: 1px solid var(--border);
      transition: all 0.2s;
    }

    .nav-footer a:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .page-footer {
      text-align: center;
      padding: 40px 0;
      font-family: var(--font-mono-sys);
      font-size: 9px;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--text-sub);
    }

    /* --------------------
           RESPONSIVE
        -------------------- */
    @media (max-width: 1000px) {
      .header {
        padding: 0 20px;
      }

      .article-container {
        padding: 40px 20px;
      }

      .dev-logs-section {
        padding: 60px 20px;
      }

      .nn-hero {
        flex-direction: column;
        align-items: flex-start;
      }

      .terminal-row {
        flex-direction: column;
        gap: 10px;
      }

      .terminal-label {
        width: 100%;
      }
    }

    /* --- HERO SECTION (SCI-FI) --- */
    .hero-wrapper {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
      background: var(--bg-body);
      overflow: hidden;
      border-bottom: 1px solid var(--border);
    }

    .hero-bg-pattern {
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(var(--grid-line) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
      background-size: 40px 40px;
      mask-image: radial-gradient(circle at center, black, transparent 80%);
      opacity: 0.5;
      pointer-events: none;
    }

    .scanning-line {
      position: absolute;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
      top: 0;
      left: 0;
      opacity: 0.2;
      animation: scan 8s linear infinite;
      pointer-events: none;
      z-index: 1;
    }

    @keyframes scan {
      0% {
        top: 0;
      }

      100% {
        top: 100%;
      }
    }

    /* Override Header for Hero */
    .hero-header {
      padding: 0 40px;
      height: 60px;
      display: flex;
      align-items: center;
      z-index: 10;
      position: relative;
    }

    .hero-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding-bottom: 80px;
      position: relative;
      z-index: 2;
    }

    .tech-frame {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80%;
      height: 60%;
      border: 1px solid var(--border);
      pointer-events: none;
      z-index: 1;
      opacity: 0.5;
    }

    .tech-frame-tl,
    .tech-frame-tr,
    .tech-frame-bl,
    .tech-frame-br {
      position: absolute;
      width: 25px;
      height: 25px;
      border: 1.5px solid var(--accent);
      opacity: 0.7;
    }

    /* Add dotted extension lines */
    .tech-frame-tl::before,
    .tech-frame-tr::before,
    .tech-frame-bl::before,
    .tech-frame-br::before {
      content: '';
      position: absolute;
      border: 1px dotted var(--accent);
      opacity: 0.3;
    }

    .tech-frame-tl {
      top: -2px;
      left: -2px;
      border-right: 0;
      border-bottom: 0;
    }

    .tech-frame-tl::before {
      width: 15px;
      height: 15px;
      top: -8px;
      left: -8px;
      border-right: 0;
      border-bottom: 0;
    }

    .tech-frame-tr {
      top: -2px;
      right: -2px;
      border-left: 0;
      border-bottom: 0;
    }

    .tech-frame-tr::before {
      width: 15px;
      height: 15px;
      top: -8px;
      right: -8px;
      border-left: 0;
      border-bottom: 0;
    }

    .tech-frame-bl {
      bottom: -2px;
      left: -2px;
      border-right: 0;
      border-top: 0;
    }

    .tech-frame-bl::before {
      width: 15px;
      height: 15px;
      bottom: -8px;
      left: -8px;
      border-right: 0;
      border-top: 0;
    }

    .tech-frame-br {
      bottom: -2px;
      right: -2px;
      border-left: 0;
      border-top: 0;
    }

    .tech-frame-br::before {
      width: 15px;
      height: 15px;
      bottom: -8px;
      right: -8px;
      border-left: 0;
      border-top: 0;
    }

    .hero-title {
      font-family: var(--font-mono-sys);
      /* Share Tech Mono */
      font-size: 5rem;
      letter-spacing: -4px;
      margin-bottom: 8px;
      color: var(--text-main);
      text-shadow: 0 0 20px var(--accent-soft);
      text-align: center;
      line-height: 1;
    }

    .hero-subtitle {
      display: inline-block;
      font-family: var(--font-mono-sys);
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 2.5px;
      color: var(--accent);
      margin-bottom: 24px;
      background: var(--bg-body);
      padding: 8px 20px;
      border: none;
      border-top: 1px solid var(--accent);
      border-bottom: 1px solid var(--accent);
      position: absolute;
      bottom: 15%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 15;
      font-weight: 500;
      opacity: 0.8;
    }

    .hero-quote {
      font-family: var(--font-main);
      font-style: italic;
      font-size: 1rem;
      color: var(--text-sub);
      margin: 32px auto 0;
      opacity: 0.7;
      max-width: 600px;
      text-align: center;
    }

    .sys-status {
      position: absolute;
      bottom: 40px;
      right: 40px;
      font-family: var(--font-mono-sys);
      font-size: 9px;
      color: var(--text-sub);
      text-align: right;
      opacity: 0.7;
      line-height: 1.8;
      z-index: 5;
      letter-spacing: 0.5px;
      padding: 12px 0;
      border-right: 2px solid var(--accent);
      padding-right: 12px;
    }

    [data-theme="light"] .sys-status {
      opacity: 0.9;
    }

    .scroll-indicator {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      font-family: var(--font-mono-sys);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: var(--text-sub);
      animation: bounce 2s infinite;
      z-index: 5;
      opacity: 0.7;
    }

    [data-theme="light"] .scroll-indicator {
      opacity: 0.9;
    }

    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0) translateX(-50%);
      }

      40% {
        transform: translateY(-10px) translateX(-50%);
      }

      60% {
        transform: translateY(-5px) translateX(-50%);
      }
    }

    @media (max-width: 768px) {
      .hero-title {
        font-size: 3rem;
      }

      .tech-frame {
        width: 90%;
      }
    }
  </style>
</head>

<body>

  <!-- FULLSCREEN HERO WRAPPER -->
  <div class="hero-wrapper">
    <div class="hero-bg-pattern"></div>
    <div class="scanning-line"></div>

    <!-- Header (Integrated) -->
    <header class="hero-header">
      <div class="header-brand">Tarun.</div>
      <div class="header-status">
        <!-- Tagline -->
        <span
          style="font-family: var(--font-mono-sys); font-size: 9px; color: var(--text-sub); text-transform: uppercase; letter-spacing: 1px; text-align: right; line-height: 1.4;">
          Engineering <br> the art of possible
        </span>
        <!-- Theme Toggle (Bordered Box) -->
        <button id="themeToggle"
          style="background: none; border: 1px solid var(--border); width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer; margin-left: 15px;"
          title="Toggle Theme">
          <!-- Sun Icon (for dark mode) -->
          <svg id="iconSun" viewBox="0 0 24 24"
            style="width: 14px; height: 14px; fill: var(--text-sub); display: block;">
            <path
              d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z" />
          </svg>
          <!-- Moon Icon (hidden by default) - Simple crescent -->
          <svg id="iconMoon" viewBox="0 0 24 24"
            style="width: 14px; height: 14px; fill: none; stroke: var(--text-sub); stroke-width: 2; display: none;">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </button>
      </div>
    </header>

    <!-- Hero Content -->
    <section class="hero-content">
      <!-- Decorative Frame -->
      <div class="tech-frame">
        <div class="tech-frame-tl"></div>
        <div class="tech-frame-tr"></div>
        <div class="tech-frame-bl"></div>
        <div class="tech-frame-br"></div>
      </div>

      <!-- Floating Word Element (for animations from header to model) -->
      <div class="floating-word" id="floatingWord"></div>

      <!-- MARKOV CHAIN TEXT GENERATION - HORIZONTAL SPLIT -->
      <div id="markovHero" class="markov-hero-final">

        <!-- Main Split: MODEL (left) | TEXT (right) -->
        <div class="markov-split-final">

          <!-- LEFT: Model Section -->
          <div class="model-side" id="modelSide">
            <div class="diagram-label">SYSTEM OVERVIEW</div>
            <!-- Current Input Display -->
            <div class="input-display" id="inputDisplay">
              <span class="input-label">INPUT:</span>
              <span class="input-word" id="inputWord">-</span>
            </div>

            <!-- Arrow into model -->
            <div class="arrow-down" id="arrowIn">
              <svg viewBox="0 0 20 30">
                <line x1="10" y1="0" x2="10" y2="22" stroke="var(--accent)" stroke-width="2" />
                <polygon points="5,22 10,30 15,22" fill="var(--accent)" />
              </svg>
            </div>

            <!-- Model Box -->
            <div class="model-box" id="modelBox">
              <div class="info-icon"></div>
              <div class="latent-tooltip">LATENT PROBABILISTIC STATE TRANSITION ENGINE</div>

              <svg viewBox="0 0 80 80" class="model-icon">
                <!-- Placeholder Icon (Minimalist) -->
                <rect x="35" y="35" width="10" height="10" fill="var(--accent)" opacity="0.1" />
              </svg>
              <div class="model-label">BLACK BOX</div>
              <div class="processing-dot" id="processingDot"></div>
              <button class="expand-btn" id="expandModelBtn">?</button>
            </div>

            <!-- Action Row (Removed) -->
            <div class="model-action-row">
            </div>

            <!-- Modal Overlay (Expanded Spec View) -->
            <div class="model-modal" id="modelModal">
              <div class="spec-sheet">

                <div class="spec-header">
                  MARKOV MODEL ARCHITECTURE
                  <span class="close" id="closeModalBtn">Ã—</span>
                </div>

                <div class="spec-body">

                  <div class="spec-left">
                    <p>
                      A Markov Model is a stochastic system that predicts the next "state" (word)
                      based solely on the current state. It builds a probability map from the
                      provided training data to simulate human-like patterns.
                    </p>

                    <div class="label">
                      TRAINING CORPUS
                      <span id="corpusSize" style="float: right; opacity: 0.7;">118 bytes</span>
                    </div>
                    <textarea id="trainingInput">Transformers in Machine Learning â€” GeeksforGeeks
A Transformer is an AI architecture introduced by Google in 2017...</textarea>

                    <div class="input-row">
                      <div class="seed-group">
                        <span class="label-seed">SEED</span>
                        <input value="ai" id="seedInput" type="text" />
                      </div>
                      <button id="runGenerationBtn">RUN ENGINE</button>
                      <button class="fastforward-btn modal-ff-btn" id="modalFastforwardBtn" title="Speed up animation">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                          stroke-linejoin="round" style="width: 12px; height: 12px; stroke-width: 3px;">
                          <polyline points="13 18 19 12 13 6"></polyline>
                          <polyline points="6 18 12 12 6 6"></polyline>
                        </svg>
                        <span class="feedback-label">FAST FORWARD</span>
                      </button>
                    </div>

                    <div class="status">
                      <div>NODE_STATE: STOCHASTIC</div>
                      <div>TRANSITION: FIRST_ORDER</div>
                      <div>MEMORY_CAP: LATENT_ONLY</div>
                    </div>
                  </div>

                  <div>
                    <div class="preview-label">
                      REAL-TIME PREVIEW // OUTPUT_STREAM
                    </div>

                    <div class="flow">
                      <div class="box" id="modalInputDisplay" style="flex: 1; min-width: 180px;">
                        <span class="input-label">IN:</span>
                        <span id="modalInputWord">?</span>
                      </div>

                      <div id="modalArrowIn" class="arrow">â†’</div>

                      <div class="box" id="modalModelBox" style="flex: 1; min-width: 180px;">
                        PROCESSING
                        <div id="modalProcessingDot" class="processing-dot"
                          style="position: absolute; width: 6px; height: 6px; background: #fff; border-radius: 50%; opacity: 0; top: 8px; right: 8px;">
                        </div>
                      </div>
                    </div>

                    <!-- Arrow pointing down to output -->
                    <div class="flow-down-arrow"
                      style="display: flex; justify-content: flex-end; padding-right: 90px; margin-top: 8px; margin-bottom: 8px;">
                      <svg width="24" height="30" viewBox="0 0 24 30">
                        <line x1="12" y1="0" x2="12" y2="22" stroke="var(--accent)" stroke-width="2" />
                        <polygon points="6,22 12,30 18,22" fill="var(--accent)" />
                      </svg>
                    </div>

                    <div class="modal-output" id="modalGeneratedText">
                      <!-- Generated text will appear here -->
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <!-- Arrow out to text -->
            <div class="arrow-right-out" id="arrowOut">
              <svg viewBox="0 0 50 20">
                <line x1="0" y1="10" x2="40" y2="10" stroke="var(--accent)" stroke-width="2" />
                <polygon points="40,5 50,10 40,15" fill="var(--accent)" />
              </svg>
            </div>

            <!-- Fast Forward Button (Replaced Feedback Label) -->
            <button class="fastforward-btn" id="fastforwardBtn" title="Speed up animation">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                style="width: 12px; height: 12px; stroke-width: 3px;">
                <polyline points="13 18 19 12 13 6"></polyline>
                <polyline points="6 18 12 12 6 6"></polyline>
              </svg>
              <span class="feedback-label">FAST FORWARD</span>
            </button>
          </div>

          <!-- RIGHT: Generated Text Section -->
          <div class="text-side" id="textSide">
            <div class="text-header-label">AI OUTPUT // PROFILE_SUMMARY</div>
            <div class="generated-text" id="generatedText">
              <!-- Words will appear here -->
              <span class="cursor-blink" id="cursorBlink">|</span>
            </div>
          </div>

        </div>

      </div>



      <div class="scroll-indicator">Scroll down</div>
    </section>
  </div>

  <div class="page-wrapper" style="padding-top: 0;">

    <!-- MAIN CONTENT -->
    <main class="main-content">
      <div class="article-container">
        <!-- (Original Header Removed) -->

        <!-- EXPERIENCE VISUALIZATION -->
        <section class="experience-section" id="experience">
          <div class="exp-header">
            <h2>03 // Experience</h2>
          </div>

          <!-- Shared Info Card -->
          <div id="expInfoCard" class="exp-info-card">
            <div class="exp-info-header">
              <div class="exp-info-title" id="expInfoTitle">ROLE TITLE</div>
              <div class="exp-info-meta" id="expInfoMeta">2024-PRESENT</div>
            </div>
            <div class="exp-info-desc" id="expInfoDesc">Technical specifications and project outcomes...</div>
          </div>

          <div class="viz-container active" id="gitViz">
            <svg id="gitSvg" viewBox="0 0 1400 500" preserveAspectRatio="xMidYMid meet">
              <g id="gitZoomGroup">
                <!-- Main timeline: Open Source (Moved to bottom y=400) -->
                <line class="git-path" id="path-0" x1="100" y1="400" x2="1350" y2="400" stroke="#9CA3AF"
                  stroke-width="3" />

                <!-- Open Source commit (y=400) -->
                <g class="git-commit git-node" id="node-0" onclick="showExpInfo(0)">
                  <circle cx="150" cy="400" r="14" fill="#e8e8e8" stroke="#9CA3AF" stroke-width="3" />
                  <text class="git-label" x="150" y="445" text-anchor="middle" fill="var(--text-sub)">Open Source</text>
                </g>

                <!-- Branch point for UST -->
                <circle class="git-node-sm" cx="500" cy="400" r="6" fill="var(--border)" />

                <!-- Smooth S-curve UP for UST branch (400 -> 220) -->
                <path class="git-path" id="path-1"
                  d="M 500,400 C 550,400 580,320 610,270 C 630,240 640,220 660,220 L 1350,220" stroke="var(--accent)"
                  stroke-width="3" fill="none" />

                <!-- UST Global commit -->
                <g class="git-commit git-node" id="node-1" onclick="showExpInfo(1)">
                  <circle cx="700" cy="220" r="16" fill="var(--accent)" stroke="var(--accent)" stroke-width="3" />
                  <text class="git-label" x="700" y="185" text-anchor="middle" fill="var(--accent)">UST GLOBAL</text>
                  <text class="git-date" x="700" y="165" text-anchor="middle">Jul 2024</text>
                </g>

                <!-- Project 1: InfraOps AI (y=100) -->
                <circle class="git-node-sm" cx="800" cy="220" r="5" fill="var(--accent)" />
                <path class="git-path" id="path-2"
                  d="M 800,220 C 840,220 870,180 900,150 C 920,120 935,110 955,100 L 1350,100" stroke="#2ecc71"
                  stroke-width="2.5" fill="none" />
                <g class="git-commit git-node" id="node-2" onclick="showExpInfo(2)">
                  <circle cx="1000" cy="100" r="13" fill="#2ecc71" stroke="#2ecc71" stroke-width="3" />
                  <text class="git-label" x="1000" y="65" text-anchor="middle" fill="#2ecc71">INFRAOPS AI</text>
                </g>

                <!-- Project 2: Insight Gen (y=150) -->
                <circle class="git-node-sm" cx="950" cy="220" r="5" fill="var(--accent)" />
                <path class="git-path" id="path-3"
                  d="M 950,220 C 990,220 1020,200 1050,170 C 1070,160 1085,150 1105,150 L 1350,150" stroke="#9b59b6"
                  stroke-width="2.5" fill="none" />
                <g class="git-commit git-node" id="node-3" onclick="showExpInfo(3)">
                  <circle cx="1180" cy="150" r="13" fill="#9b59b6" stroke="#9b59b6" stroke-width="3" />
                  <text class="git-label" x="1180" y="124" text-anchor="middle" fill="#9b59b6">INSIGHT GEN</text>
                </g>

                <!-- Project 4: AI Monitor (y=280) -->
                <circle class="git-node-sm" cx="1280" cy="220" r="5" fill="var(--accent)" />
                <path class="git-path" id="path-4"
                  d="M 1280,220 C 1300,220 1310,240 1320,260 C 1325,275 1330,280 1335,280 L 1350,280" stroke="#f39c12"
                  stroke-width="2.5" fill="none" />
                <g class="git-commit git-node" id="node-4" onclick="showExpInfo(5)">
                  <circle cx="1347" cy="280" r="13" fill="#f39c12" stroke="#f39c12" stroke-width="3" />
                  <text class="git-label" x="1347" y="315" text-anchor="middle" fill="#f39c12">AI MONITOR</text>
                </g>

                <!-- Project 3: Validation (y=340) -->
                <circle class="git-node-sm" cx="1100" cy="220" r="5" fill="var(--accent)" />
                <path class="git-path" id="path-5"
                  d="M 1100,220 C 1140,220 1170,280 1200,320 C 1220,335 1235,340 1255,340 L 1350,340" stroke="#e74c3c"
                  stroke-width="2.5" fill="none" />
                <g class="git-commit git-node" id="node-5" onclick="showExpInfo(4)">
                  <circle cx="1305" cy="340" r="13" fill="#e74c3c" stroke="#e74c3c" stroke-width="3" />
                  <text class="git-label" x="1305" y="375" text-anchor="middle" fill="#e74c3c">VALIDATION</text>
                </g>
              </g>

              <!-- Timeline markers -->
              <line x1="50" y1="460" x2="1350" y2="460" stroke="var(--border)" stroke-width="0.5" />
              <text x="150" y="490" class="git-date" text-anchor="middle">2021</text>
              <text x="350" y="490" class="git-date" text-anchor="middle">2022</text>
              <text x="450" y="490" class="git-date" text-anchor="middle">2023</text>
              <text x="500" y="490" class="git-date" text-anchor="middle">Jul 2024</text>
              <text x="1200" y="490" class="git-date" text-anchor="middle">Present</text>
            </svg>
          </div>
        </section>



        <!-- ABOUT -->
        <section class="content-section" id="about">
          <h2>01 // About</h2>
          <p>
            Highly motivated web developer with a passion for open source contributions.
            Proven track record in delivering high-quality solutions through teamwork.
            Eager to apply expertise to tackle real-world challenges and thrive in continuous learning.
          </p>
        </section>

        <!-- SKILLS -->
        <section class="content-section" id="skills">
          <h2>02 // Technical Skills</h2>
          <div class="terminal-card">

            <div class="terminal-row">
              <div class="terminal-label">LANGUAGES</div>
              <div class="terminal-content mono">Python, JavaScript (JS), SQL</div>
            </div>

            <div class="terminal-row">
              <div class="terminal-label">WEB & FRAMEWORKS</div>
              <div class="terminal-content mono">
                Django, FastAPI, Flask, Streamlit, REST APIs, HTML, CSS, Bootstrap
              </div>
            </div>

            <div class="terminal-row">
              <div class="terminal-label">AI & ML</div>
              <div class="terminal-content mono">
                Supervised/Unsupervised Learning, CNN, DL, NLP, LLM, RAG, Scikit-learn, TensorFlow, PyTorch, Pandas,
                NumPy, LangChain, LangGraph, Crew.ai
              </div>
            </div>

            <div class="terminal-row">
              <div class="terminal-label">DATA & TOOLS</div>
              <div class="terminal-content mono">
                MySQL, PostgreSQL, MongoDB, Redis, SQLite, ChromaDB, Git, GitHub, GitLab, AWS, Docker, Kubernetes
              </div>
            </div>

          </div>
        </section>



      <!-- DEV LOGS INDEX SECTION -->
      <section class="dev-logs-index-section" id="devLogsIndex">
        <div class="dev-logs-index-container">
          <!-- Header -->
          <div class="dev-logs-index-header">
            <div class="dev-logs-index-title">// DEV_LOGS_INDEX</div>
            <h2 class="dev-logs-index-subtitle">Knowledge Base & Documentation</h2>
            <p class="dev-logs-index-description">
              A curated collection of technical documentation, tutorials, and reference guides.
              Covering everything from development tools to distributed systems theory.
            </p>
          </div>

          <!-- Quick Stats -->
          <div class="dev-logs-quick-stats">
            <div class="stat-box">
              <div class="stat-box-value">11</div>
              <div class="stat-box-label">Categories</div>
            </div>
            <div class="stat-box">
              <div class="stat-box-value">48</div>
              <div class="stat-box-label">Topics</div>
            </div>
            <div class="stat-box">
              <div class="stat-box-value">32</div>
              <div class="stat-box-label">Completed</div>
            </div>
            <div class="stat-box">
              <div class="stat-box-value">67%</div>
              <div class="stat-box-label">Progress</div>
            </div>
          </div>

          <!-- Categories Grid -->
          <div class="dev-logs-categories-grid" id="categoriesGrid">
            <!-- Populated by JavaScript -->
          </div>

          <!-- View All CTA -->
          <div class="dev-logs-footer-cta" style="text-align: center;">
            <p>
              Explore complete documentation with advanced search, filtering, and detailed content.
            </p>
            <a href="/dev-logs.html" class="view-all-link">
              <span>View Full Documentation</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7" />
              </svg>
            </a>
          </div>
        </div>
      </section>

      <!-- BLOGS SECTION -->
      <section class="blogs-section" id="blogs">
        <div class="blogs-container">
          <!-- Header -->
          <div class="blogs-header">
            <div class="blogs-title">// BLOGS_ARTICLES</div>
            <h2 class="blogs-subtitle">Thoughts, Stories & Experiences</h2>
            <p class="blogs-description">
              Personal reflections, technical insights, and stories from the journey of building
              intelligent systems and crafting meaningful software.
            </p>
          </div>

          <!-- Stats -->
          <div class="blogs-stats">
            <div class="stat-box">
              <div class="stat-box-value">8</div>
              <div class="stat-box-label">Articles</div>
            </div>
            <div class="stat-box">
              <div class="stat-box-value">24K</div>
              <div class="stat-box-label">Words Written</div>
            </div>
            <div class="stat-box">
              <div class="stat-box-value">5</div>
              <div class="stat-box-label">Categories</div>
            </div>
          </div>

          <!-- Filter Tabs -->
          <div class="blog-filters" id="blogFilters">
            <button class="blog-filter-btn active" data-filter="all">All</button>
            <button class="blog-filter-btn" data-filter="thoughts">Thoughts</button>
            <button class="blog-filter-btn" data-filter="technical">Technical</button>
            <button class="blog-filter-btn" data-filter="stories">Stories</button>
          </div>

          <!-- Featured Blog -->
          <div class="featured-blog" id="featuredBlog">
            <!-- Populated by JavaScript -->
          </div>

          <!-- Blogs Grid -->
          <div class="blogs-grid" id="blogsGrid">
            <!-- Populated by JavaScript -->
          </div>
        </div>
      </section>

      </div>


      <!-- FOOTER -->
      <div class="nav-footer">
        <a href="#">Mail</a>
        <a href="#">Github</a>
        <a href="#">Linkedin</a>
        <a href="#">Leetcode</a>
      </div>

      <div class="page-footer">
        | Tarun |<br>
        PORTFOLIO<br>
        Â© 2025 TARUN â€¢ [ SECTION 1990 ]
        <span style="opacity:0.04; margin-left:10px;">attention is all you need</span>
      </div>
  </div>
  </main>
  </div>



  <!-- SCRIPTS -->
  <script>
    // ==========================================
    // MARKOV CHAIN TEXT GENERATION ANIMATION - FINAL
    // ==========================================

    const markovAnimation = (() => {
      // Internal state for the generator
      class MarkovGenerator {
        constructor() {
          this.model = {};  // N-gram transitions: key -> [next_words]
          this.n = 1;       // Default n-gram size
        }

        /**
         * Builds n-gram transitions from text.
         * Based on transformers.py build_markov_model()
         */
        train(text, n = 1) {
          this.n = n;
          this.model = {};

          // Tokenize: split by whitespace and filter empty
          const words = text.split(/\s+/).filter(w => w.trim().length > 0);

          // Build n-gram model (case-insensitive keys for better matching)
          for (let i = 0; i < words.length - n; i++) {
            // Create key from n consecutive words (lowercase for matching)
            const key = words.slice(i, i + n).join(' ').toLowerCase();
            const nextWord = words[i + n];

            if (!this.model[key]) {
              this.model[key] = [];
            }
            this.model[key].push(nextWord);
          }

          console.log('Markov model trained with', Object.keys(this.model).length, 'n-grams');
        }

        /**
         * Generates text starting with seed using the Markov model.
         * Based on transformers.py generate_sentence()
         * Sets n-gram to number of words in seed.
         */
        generate(seed, maxLength = 30) {
          // Tokenize seed
          const seedWords = seed.split(/\s+/).filter(w => w.trim().length > 0);

          // Set n to the number of words in seed (matching Python logic)
          const seedN = seedWords.length;

          // Rebuild model with seed word count as n
          const currentText = document.getElementById('trainingInput').value;
          this.train(currentText, seedN);

          // Check if seed has enough words
          if (seedWords.length < this.n) {
            // Return seed as-is if not enough words
            return seedWords.map(word => ({ text: word, class: 'gen-word-body' }));
          }

          // Use the full seed in the result, but only the last n words for the state
          // Use lowercase for matching
          let current = seedWords.slice(-this.n).join(' ').toLowerCase();
          const result = [];

          // Add all seed words to result
          for (const word of seedWords) {
            result.push({ text: word, class: 'gen-word-body' });
          }

          // Generate continuation
          for (let i = 0; i < maxLength; i++) {
            // Check if current context exists in model (case-insensitive)
            if (!this.model[current]) {
              console.log('No continuation for:', current);
              break; // No continuation available
            }

            // Pick next word randomly from possible continuations
            const possibleNext = this.model[current];
            const nextWord = possibleNext[Math.floor(Math.random() * possibleNext.length)];

            // Determine class for styling
            let className = 'gen-word-body';
            if (nextWord.startsWith('**') || nextWord.endsWith('**')) {
              className = 'marker';
            }

            result.push({ text: nextWord, class: className });

            // Update current context: use last n words from all generated words (lowercase)
            const allWords = result.map(w => w.text);
            current = allWords.slice(-this.n).join(' ').toLowerCase();

            // Optional: stop at sentence boundaries
            if (i > 10 && /[.!?]$/.test(nextWord) && !nextWord.includes('**')) {
              break;
            }
          }

          console.log('Generated', result.length, 'words');
          return result;
        }
      }

      const generator = new MarkovGenerator();

      // DOM Elements
      const inputDisplay = document.getElementById('inputDisplay');
      const inputWord = document.getElementById('inputWord');
      const modelBox = document.getElementById('modelBox');
      const modelSide = document.querySelector('.model-side');
      const processingDot = document.getElementById('processingDot');
      const arrowIn = document.getElementById('arrowIn');
      const arrowOut = document.getElementById('arrowOut');
      const generatedText = document.getElementById('generatedText');
      const cursorBlink = document.getElementById('cursorBlink');
      const floatingWord = document.getElementById('floatingWord');
      const headerBrand = document.querySelector('.header-brand');
      const fastforwardBtn = document.getElementById('fastforwardBtn');
      const feedbackIndicator = fastforwardBtn;

      // New Controls
      const expandModelBtn = document.getElementById('expandModelBtn');
      const modelModal = document.getElementById('modelModal');
      const closeModalBtn = document.getElementById('closeModalBtn');
      const trainingInput = document.getElementById('trainingInput');
      const seedInput = document.getElementById('seedInput');
      const runGenerationBtn = document.getElementById('runGenerationBtn');
      const modalFastforwardBtn = document.getElementById('modalFastforwardBtn');
      const corpusSize = document.getElementById('corpusSize');

      let currentWords = [];
      let currentWordIndex = 0;
      let isBoldSection = false;
      let boldStartIndex = -1;
      let speedMultiplier = 1;
      let isRunning = false;

      // Update corpus size label
      const updateSizeLabel = () => {
        const size = new Blob([trainingInput.value]).size;
        corpusSize.textContent = `${size} bytes`;
      };
      trainingInput.addEventListener('input', updateSizeLabel);
      updateSizeLabel(); // Initialize on load
      updateSizeLabel();

      // Modal Toggle
      expandModelBtn.addEventListener('click', () => {
        modelModal.classList.add('active');
        document.body.style.overflow = 'hidden'; // Prevent scroll
      });

      closeModalBtn.addEventListener('click', () => {
        modelModal.classList.remove('active');
        document.body.style.overflow = '';
      });

      // Close on backdrop click
      modelModal.addEventListener('click', (e) => {
        if (e.target === modelModal) closeModalBtn.click();
      });

      // Info Icon Click
      const infoIcon = document.querySelector('.info-icon');
      infoIcon.addEventListener('click', () => {
        alert("MARKOV CHAIN LOGIC:\nA stochastic model describing a sequence of possible events in which the probability of each event depends only on the state attained in the previous event.\n\nIn this implementation, the engine builds a first-order transition map from the provided training corpus to predict the 'next' token based on current latent state.");
      });

      function createWordElement(wordObj, index, container) {
        const span = document.createElement('span');
        span.className = wordObj.class || 'gen-word-body';
        span.textContent = wordObj.text;
        span.dataset.wordIndex = index;

        if (wordObj.class === 'marker' || wordObj.text.startsWith('**') || wordObj.text.endsWith('**')) {
          span.dataset.isMarker = 'true';
        }
        return span;
      }

      function applyBoldStyling(container, boldStart, currentIndex) {
        const allWords = container.querySelectorAll('span[data-word-index]');
        allWords.forEach(word => {
          const idx = parseInt(word.dataset.wordIndex);
          if (idx >= boldStart && idx <= currentIndex + 1) {
            const wasVisible = word.classList.contains('visible');
            word.className = 'gen-word-subtitle';
            if (wasVisible) word.classList.add('visible'); // Preserve visibility
            if (word.dataset.isMarker === 'true') {
              word.textContent = word.textContent.replace(/\*\*/g, '');
              if (word.textContent.trim() === '') word.remove();
            }
          } else if (idx < boldStart) {
            const wasVisible = word.classList.contains('visible');
            word.className = 'gen-word-title';
            if (wasVisible) word.classList.add('visible'); // Preserve visibility
          }
        });
      }

      function createLineBreak() {
        const br = document.createElement('div');
        br.style.width = '100%';
        br.style.height = '15px';
        return br;
      }

      function animateFloatingWord(word, fromEl, toEl, callback) {
        if (!floatingWord) return callback?.();
        const fromRect = fromEl.getBoundingClientRect();
        floatingWord.textContent = word;
        floatingWord.style.left = (fromRect.left + fromRect.width / 2) + 'px';
        floatingWord.style.top = (fromRect.top + fromRect.height / 2) + 'px';
        floatingWord.classList.add('visible');

        setTimeout(() => {
          const toRect = toEl.getBoundingClientRect();
          floatingWord.style.left = (toRect.left + toRect.width / 2) + 'px';
          floatingWord.style.top = (toRect.top + toRect.height / 2) + 'px';
        }, 50 / speedMultiplier);

        setTimeout(() => {
          floatingWord.classList.remove('visible');
          callback?.();
        }, 600 / speedMultiplier);
      }

      function animateStep(state) {
        const {
          targetContainer,
          targets,
          words,
          currentIndex
        } = state;

        if (!state.isRunning || state.currentIndex >= words.length) {
          state.isRunning = false;
          if (state.cursor) state.cursor.style.display = 'none';
          return;
        }

        const currentWord = words[state.currentIndex];
        const nextWord = words[state.currentIndex + 1];
        const isLastWord = state.currentIndex >= words.length - 1;

        // Visual feedback for processing
        targets.inputWord.textContent = currentWord.text;
        targets.inputDisplay.classList.add('active');

        setTimeout(() => targets.arrowIn.classList.add('active'), 200 / speedMultiplier);

        setTimeout(() => {
          targets.inputDisplay.classList.remove('active');
          targets.arrowIn.classList.remove('active');
          targets.modelBox.classList.add('active');
          targets.processingDot.classList.add('active');
        }, 400 / speedMultiplier);

        setTimeout(() => targets.processingDot.classList.remove('active'), 800 / speedMultiplier);
        setTimeout(() => targets.arrowOut.classList.add('active'), 900 / speedMultiplier);

        setTimeout(() => {
          targets.modelBox.classList.remove('active');
          targets.arrowOut.classList.remove('active');

          if (nextWord) {
            const wordEl = createWordElement(nextWord, state.currentIndex + 1, targetContainer);
            targetContainer.appendChild(wordEl);

            // FORCE VISIBILITY: Ensure the element appears
            // Use a slight delay to allow CSS transition if desired, or immediate for title/subtitle
            const appearanceDelay = (nextWord.class === 'gen-word-title' || nextWord.class === 'gen-word-subtitle') ? 50 : 50;

            setTimeout(() => {
              wordEl.classList.add('visible', 'highlight');
              if (state.cursor) targetContainer.appendChild(state.cursor); // Keep cursor at end
              setTimeout(() => wordEl.classList.remove('highlight'), 300 / speedMultiplier);
            }, appearanceDelay / speedMultiplier);

            // Marker logic - if word has **, toggle bolding
            if (nextWord.text.startsWith('**') || nextWord.text.endsWith('**') || (nextWord.text === '**')) {
              if (!state.isBoldSection) {
                state.isBoldSection = true;
                state.boldStartIndex = state.currentIndex + 1;
              } else {
                state.isBoldSection = false;
                setTimeout(() => applyBoldStyling(targetContainer, state.boldStartIndex, state.currentIndex + 1), 50 / speedMultiplier);
              }
            }

            if (nextWord.lineBreak) targetContainer.appendChild(createLineBreak());
          }

          if (nextWord && !isLastWord) {
            // Speed up the gap between words
            setTimeout(() => {
              feedbackIndicator.classList.add('feedback-active');
              const spans = targetContainer.querySelectorAll('span');
              const lastEl = spans[spans.length - 1] || targetContainer;

              animateFloatingWord(nextWord.text, lastEl, targets.inputDisplay, () => {
                feedbackIndicator.classList.remove('feedback-active');
                state.currentIndex++;
                animateStep(state);
              });
            }, 300 / speedMultiplier);
          } else {
            state.currentIndex++;
            setTimeout(() => animateStep(state), 500 / speedMultiplier);
          }
        }, 1100 / speedMultiplier);
      }

      // Separate states for Hero and Modal
      const heroState = {
        isRunning: false,
        currentIndex: 0,
        isBoldSection: false,
        boldStartIndex: -1,
        cursor: cursorBlink,
        targetContainer: generatedText,
        targets: {
          inputDisplay, inputWord, modelBox, processingDot, arrowIn, arrowOut
        }
      };

      const modalState = {
        isRunning: false,
        currentIndex: 0,
        isBoldSection: false,
        boldStartIndex: -1,
        cursor: null,
        targetContainer: null,
        targets: {}
      };

      function initModalState() {
        modalState.targetContainer = document.getElementById('modalGeneratedText');
        modalState.targets = {
          inputDisplay: document.getElementById('modalInputDisplay'),
          inputWord: document.getElementById('modalInputWord'),
          modelBox: document.getElementById('modalModelBox'),
          processingDot: document.getElementById('modalProcessingDot'),
          arrowIn: document.getElementById('modalArrowIn'),
          arrowOut: { classList: { add: () => { }, remove: () => { } } }  // Dummy - no longer in HTML
        };
        modalState.cursor = cursorBlink.cloneNode(true);
        modalState.cursor.id = 'modalCursorBlink';
      }

      function startAnimation(state, seed, wordsCount = 60) {
        if (state === modalState && !state.targetContainer) initModalState();

        // Prevent multiple animations - wait for current to finish
        if (state.isRunning) {
          console.log('Animation already running, ignoring new request');
          return;
        }
        state.isRunning = true;

        const actualSeed = seed || seedInput.value.trim() || 'I';

        // For HERO: Show static content (no generation)
        // For MODAL: Generate content using Markov from seed
        let allWords;
        let seedWord = null; // Word to animate but not display

        if (state === heroState) {
          // Static content for hero section
          // "Tarun" is the SEED (Input) that generates "**Product"
          // So "Tarun" must be words[0], but it is NOT added to the display container
          seedWord = "Tarun";
          allWords = [
            { text: "Tarun", class: "seed-word" }, // Index 0: Input for first step
            { text: "**Product", class: "marker" }, // Index 1: Output of first step
            { text: "Engineer", class: "gen-word-body" },
            { text: "&", class: "gen-word-body" },
            { text: "Gen", class: "gen-word-body" },
            { text: "AI", class: "gen-word-body" },
            { text: "Specialist.**", class: "marker", lineBreak: true },
            { text: "I", class: "gen-word-body" },
            { text: "build", class: "gen-word-body" },
            { text: "the", class: "gen-word-body" },
            { text: "infrastructure", class: "gen-word-body" },
            { text: "behind", class: "gen-word-body" },
            { text: "the", class: "gen-word-body" },
            { text: "intelligence.", class: "gen-word-body" },
            { text: "Merging", class: "gen-word-body" },
            { text: "full-stack", class: "gen-word-body" },
            { text: "web", class: "gen-word-body" },
            { text: "architecture", class: "gen-word-body" },
            { text: "with", class: "gen-word-body" },
            { text: "Large", class: "gen-word-body" },
            { text: "Language", class: "gen-word-body" },
            { text: "Models", class: "gen-word-body" },
            { text: "to", class: "gen-word-body" },
            { text: "create", class: "gen-word-body" },
            { text: "autonomous,", class: "gen-word-body" },
            { text: "production-ready", class: "gen-word-body" },
            { text: "systems.", class: "gen-word-body" }
          ];
        } else {
          // Dynamic generation for modal - NO hardcoded header, pure generation from seed
          allWords = generator.generate(actualSeed, wordsCount);
        }

        state.words = allWords;

        state.targetContainer.innerHTML = '';
        state.currentIndex = 0;
        state.isBoldSection = false; // Start false, let marker logic handle it
        state.boldStartIndex = -1; // Will be set when opening marker is encountered

        if (state.cursor) {
          state.cursor.style.display = 'inline-block';
          state.targetContainer.appendChild(state.cursor);
        }

        const origin = (state === heroState) ? headerBrand : expandModelBtn;

        // For hero: animate "Tarun" as seed but don't show it
        // For modal: show first word immediately
        if (state === heroState && seedWord) {
          // Animate "Tarun" from header brand to Input
          animateFloatingWord(seedWord, origin, state.targets.inputDisplay, () => {
            // Start processing loop. 
            // animateStep uses words[currentIndex] as Input.
            // We want Input="Tarun" (words[0]). So currentIndex should be 0.
            state.currentIndex = 0;
            animateStep(state);
          });
        } else {
          // Modal: Display seed word in the input, then start animation
          const seedWords = actualSeed.split(/\s+/).filter(w => w.trim().length > 0);
          const seedWordCount = seedWords.length;

          // Show seed in input display
          state.targets.inputWord.textContent = actualSeed;
          state.targets.inputDisplay.classList.add('active');

          // Add seed words to output container first
          for (let i = 0; i < seedWordCount && i < state.words.length; i++) {
            const wordEl = createWordElement(state.words[i], i, state.targetContainer);
            state.targetContainer.appendChild(wordEl);
            setTimeout(() => wordEl.classList.add('visible'), 50 + (i * 100));
          }

          if (state.cursor) state.targetContainer.appendChild(state.cursor);

          // Start animation from the word after all seed words
          setTimeout(() => {
            state.targets.inputDisplay.classList.remove('active');
            state.currentIndex = seedWordCount - 1; // Set to last seed word index

            // Check if there are more words beyond the seed to animate
            if (state.words.length > seedWordCount) {
              // Start the animation loop
              animateStep(state);
            } else {
              // No more words to generate - model couldn't continue from this seed
              console.log('No continuation found for seed:', actualSeed);
              console.log('Words array:', state.words);
              console.log('Seed word count:', seedWordCount);
              state.isRunning = false;
              if (state.cursor) state.cursor.style.display = 'none';
            }
          }, 800 + (seedWordCount * 100));
        }
      }

      function start() {
        startAnimation(heroState);
      }

      runGenerationBtn.addEventListener('click', () => {
        // Stop any running animations
        heroState.isRunning = false;
        modalState.isRunning = false; // CRITICAL: Reset modal state so we can run again!

        // Get training corpus
        const corpus = trainingInput.value.trim();

        if (!corpus) {
          alert('Please provide a training corpus!');
          return;
        }

        // Train the Markov model with the corpus
        generator.train(corpus);

        // Clear previous output
        const output = document.getElementById('modalGeneratedText');
        if (output) output.innerHTML = '';

        // Reset IN and OUT displays to ?
        const inWord = document.getElementById('modalInputWord');
        const outWord = document.getElementById('modalOutputWord');
        if (inWord) inWord.textContent = '?';
        if (outWord) outWord.textContent = '?';

        // Start animation with the modal state
        startAnimation(modalState);
      });

      fastforwardBtn.addEventListener('click', () => {
        speedMultiplier = speedMultiplier === 1 ? 5 : 1;
        fastforwardBtn.classList.toggle('active');
        modalFastforwardBtn.classList.toggle('active');
        fastforwardBtn.title = speedMultiplier > 1 ? 'Normal speed' : 'Speed up animation';
        modalFastforwardBtn.title = speedMultiplier > 1 ? 'Normal speed' : 'Speed up animation';
      });

      // Modal Fast Forward Button - synced with main fast forward
      modalFastforwardBtn.addEventListener('click', () => {
        speedMultiplier = speedMultiplier === 1 ? 5 : 1;
        modalFastforwardBtn.classList.toggle('active');
        fastforwardBtn.classList.toggle('active');
        modalFastforwardBtn.title = speedMultiplier > 1 ? 'Normal speed' : 'Speed up animation';
        fastforwardBtn.title = speedMultiplier > 1 ? 'Normal speed' : 'Speed up animation';
      });

      return { start };
    })();
    // ==========================================
    // REAL MNIST NEURAL NETWORK (Inference Engine)
    // ==========================================

    // Helpers
    const formatProb = (p) => (p * 100).toFixed(1) + '%';

    const initRealNN = () => {
      const weights = window.modelData; // Loaded from model_weights.js
      if (!weights) {
        console.error("Weights not loaded!");
        return;
      }

      // Canvas & UI Setup
      const canvas = document.getElementById("digitCanvas");
      if (!canvas) { console.log('NN Hero not found, skipping init'); return; }
      const ctx = canvas.getContext("2d", { willReadFrequently: true });

      // White Canvas, Black Ink (Standard)
      const resetCanvas = () => {
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, 120, 120);
        ctx.strokeStyle = "black";
        ctx.lineWidth = 8; // Reduced from 12
        ctx.lineCap = "round";
        ctx.lineJoin = "round";
      };
      resetCanvas();

      let drawing = false;
      const getPos = (e) => {
        const r = canvas.getBoundingClientRect();
        return {
          x: (e.touches ? e.touches[0].clientX : e.clientX) - r.left,
          y: (e.touches ? e.touches[0].clientY : e.clientY) - r.top
        };
      };

      // Drawing Handlers
      canvas.addEventListener('mousedown', e => { drawing = true; ctx.beginPath(); ctx.moveTo(getPos(e).x, getPos(e).y); });
      canvas.addEventListener('mousemove', e => {
        if (drawing) {
          ctx.lineTo(getPos(e).x, getPos(e).y);
          ctx.stroke();
          predict();
        }
      });
      const stop = () => { drawing = false; predict(); };
      canvas.addEventListener('mouseup', stop);
      canvas.addEventListener('mouseleave', stop);

      document.getElementById('btnClearSmall').onclick = () => {
        resetCanvas();
        document.getElementById('predValue').innerText = "-";
        updateChart(new Array(10).fill(0));
        document.querySelectorAll('.neuron.active').forEach(n => n.classList.remove('active', 'winner'));
        // Clear visualization values
        window.vizNodes.forEach(n => delete n.val);
        // Redraw viz to clear
        updateViz(new Float32Array(784), new Float32Array(64), new Float32Array(10), -1);
      };

      // Expand Button Logic
      const btnExpand = document.getElementById('btnExpand');
      const nnHero = document.getElementById('nnHero');
      const btnCloseFS = document.getElementById('btnCloseFS');

      btnExpand.onclick = () => {
        nnHero.classList.add('fullscreen');
        document.body.style.overflow = 'hidden'; // Lock scroll
        // Resize logic if needed? CSS handles 80vh
      };

      if (btnCloseFS) {
        btnCloseFS.onclick = () => {
          nnHero.classList.remove('fullscreen');
          document.body.style.overflow = ''; // Unlock scroll
        };
      }

      // Network Config
      const W1 = new Float32Array(weights[0].weights.flat());
      const B1 = new Float32Array(weights[0].biases);
      const W2 = new Float32Array(weights[1].weights.flat());
      const B2 = new Float32Array(weights[1].biases);

      // Visualization Setup
      // Input Layer: 784 is too big. Let's visualize a downscaled grid or just a column.
      // User asked for "input nodes are missing".
      // Let's add a column of 50 representative nodes for Layer 0.
      buildViz(784, 64, 10);

      // PREDICTION ENGINE
      function predict() {
        const startT = performance.now();

        const input = extractInput();
        if (!input) return;

        // 2. Forward Pass (L1)
        const h_activations = new Float32Array(64);
        for (let j = 0; j < 64; j++) {
          let sum = B1[j];
          for (let i = 0; i < 784; i++) {
            if (input[i] > 0) {
              sum += input[i] * W1[i * 64 + j];
            }
          }
          h_activations[j] = Math.max(0, sum);
        }

        // 3. Forward Pass (L2)
        const o_activations = new Float32Array(10);
        for (let j = 0; j < 10; j++) {
          let sum = B2[j];
          for (let i = 0; i < 64; i++) {
            sum += h_activations[i] * W2[i * 10 + j];
          }
          o_activations[j] = sum;
        }

        // Softmax
        const maxLogit = Math.max(...o_activations);
        const exps = o_activations.map(l => Math.exp(l - maxLogit));
        const sumExps = exps.reduce((a, b) => a + b, 0);
        const probs = exps.map(e => e / sumExps);

        const endT = performance.now();
        document.getElementById('infTime').innerText = (endT - startT).toFixed(2);

        // 4. Update UI
        const pred = probs.indexOf(Math.max(...probs));
        document.getElementById('predValue').innerText = pred;
        updateChart(probs);

        // Pass Input to Viz? We need a summarized input for the 50 nodes.
        // Let's map 784 -> 50 by averaging chunks? Or just sampling?
        // Sampling is easier. 784 / 50 ~= 15.6. Step 15.
        updateViz(input, h_activations, probs, pred);
      }

      // Helper: Canvas to Input (Invert Colors for MNIST)
      function extractInput() {
        const tempCanvas = document.createElement('canvas');
        tempCanvas.width = 28; tempCanvas.height = 28;
        const tCtx = tempCanvas.getContext('2d');
        tCtx.drawImage(canvas, 0, 0, 28, 28);
        const imgData = tCtx.getImageData(0, 0, 28, 28).data;
        const input = new Float32Array(784);
        let hasUrl = false;
        for (let i = 0; i < 784; i++) {
          const val = (255 - imgData[i * 4]);
          input[i] = val / 255.0;
          if (val > 0) hasUrl = true;
        }
        return hasUrl ? input : null;
      }

      function updateChart(probs) {
        const chart = document.getElementById('confChart');
        chart.innerHTML = '';
        probs.forEach((p, i) => {
          const row = document.createElement('div');
          row.className = 'bar-row';
          row.innerHTML = `
    <div class="bar-label" style="width:20px; font-size:14px;">${i}</div>
    <div class="bar-ui" style="height:12px;"><div class="bar-fill" style="width: ${p * 100}%"></div></div>
    <div style="width:40px; text-align:right; font-size:14px;">${Math.round(p * 100)}%</div>
    `;
          chart.appendChild(row);
        });
      }
    };

    // VIZ BUILDER 
    function buildViz(l1, l2, l3) {
      const svg = document.getElementById("nnSvg");
      svg.innerHTML = '';
      // Make it bigger
      const width = 800, height = 300;
      svg.setAttribute('viewBox', `0 0 ${width} ${height}`);

      const layerGap = width / 4;

      const neurons = [];
      const linesGroup = document.createElementNS("http://www.w3.org/2000/svg", "g");
      svg.appendChild(linesGroup);
      const nodesGroup = document.createElementNS("http://www.w3.org/2000/svg", "g");
      svg.appendChild(nodesGroup);

      // Input Layer (Sampled 50 nodes)
      const inputCount = 50;
      const yGapI = height / (inputCount + 1);
      for (let i = 0; i < inputCount; i++) {
        const cx = layerGap * 1.0;
        const cy = (i + 1) * yGapI;
        const realIdx = Math.floor(i * (784 / inputCount));
        const c = createNode(cx, cy, 0, realIdx);
        c.setAttribute('r', 2);
        nodesGroup.appendChild(c);
        neurons.push({ el: c, cx, cy, layer: 0, idx: realIdx, vIdx: i });
      }

      // Hidden Layer
      const yGapH = height / (64 + 1);
      for (let i = 0; i < 64; i++) {
        const cx = layerGap * 2.0;
        const cy = (i + 1) * yGapH;
        const c = createNode(cx, cy, 1, i);
        nodesGroup.appendChild(c);
        neurons.push({ el: c, cx, cy, layer: 1, idx: i });
      }

      // Output Layer
      const yGapO = height / (10 + 1);
      for (let i = 0; i < 10; i++) {
        const cx = layerGap * 3.0;
        const cy = (i + 1) * yGapO;
        const c = createNode(cx, cy, 2, i);
        c.setAttribute('r', 6);
        nodesGroup.appendChild(c);
        neurons.push({ el: c, cx, cy, layer: 2, idx: i });
      }

      const edges = [];
      // L0 -> L1 Edges (Sampled: connect each L0 to 3 random L1s)
      neurons.filter(n => n.layer === 0).forEach(inp => {
        const targets = neurons.filter(n => n.layer === 1).sort(() => 0.5 - Math.random()).slice(0, 3);
        targets.forEach(hid => {
          const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
          l.setAttribute("x1", inp.cx); l.setAttribute("y1", inp.cy);
          l.setAttribute("x2", hid.cx); l.setAttribute("y2", hid.cy);
          l.classList.add("edge");
          linesGroup.appendChild(l);
          edges.push({ el: l, src_layer: 0, src_idx: inp.idx, tgt_idx: hid.idx });
        });
      });

      // L1 -> L2 Edges (All)
      neurons.filter(n => n.layer === 1).forEach(h => {
        neurons.filter(n => n.layer === 2).forEach(o => {
          const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
          l.setAttribute("x1", h.cx); l.setAttribute("y1", h.cy);
          l.setAttribute("x2", o.cx); l.setAttribute("y2", o.cy);
          l.classList.add("edge");
          linesGroup.appendChild(l);
          edges.push({ el: l, src_layer: 1, src_idx: h.idx, tgt_idx: o.idx });
        });
      });

      window.vizNodes = neurons;
      window.vizEdges = edges;
    }

    function createNode(cx, cy, layer, idx) {
      const c = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      c.setAttribute("cx", cx); c.setAttribute("cy", cy); c.setAttribute("r", layer === 1 ? 3 : 5);
      c.classList.add("neuron");
      c.addEventListener('mouseenter', (e) => showTooltip(e, layer, idx));
      c.addEventListener('mouseleave', hideTooltip);
      return c;
    }

    // VIZ UPDATE
    function updateViz(input, hidden, output, winnerIdx) {
      // Update Nodes
      window.vizNodes.filter(n => n.layer === 0).forEach(n => {
        const val = input ? input[n.idx] : 0;
        n.val = val;
        n.el.style.opacity = Math.min(0.2 + val * 0.8, 1);
        n.el.style.fill = val > 0 ? "var(--accent)" : "white";
      });
      window.vizNodes.filter(n => n.layer === 1).forEach(n => {
        const val = hidden[n.idx];
        n.val = val;
        n.el.style.opacity = Math.min(0.2 + val * 0.6, 1);
        if (val > 0) n.el.classList.add('active');
        else n.el.classList.remove('active');
      });
      window.vizNodes.filter(n => n.layer === 2).forEach(n => {
        const val = output[n.idx];
        n.val = val;
        n.el.style.opacity = Math.min(0.3 + val, 1);
        if (n.idx === winnerIdx) n.el.classList.add('winner', 'active');
        else n.el.classList.remove('winner', 'active');
      });

      // Update Edges
      for (let i = 0; i < window.vizEdges.length; i++) {
        const e = window.vizEdges[i];

        if (e.src_layer === 0) {
          // L0->L1
          const val = input ? input[e.src_idx] : 0;
          if (val > 0.1) {
            e.el.style.opacity = 0.4;
            e.el.style.strokeWidth = '0.5px';
          } else {
            e.el.style.opacity = 0.02;
            e.el.style.strokeWidth = '0.5px';
          }
        } else {
          // L1->L2
          const hVal = hidden[e.src_idx];
          if (hVal > 0.5 && e.tgt_idx === winnerIdx) {
            e.el.style.opacity = 0.7;
            e.el.style.strokeWidth = '1.5px';
          } else {
            e.el.style.opacity = 0.04;
            e.el.style.strokeWidth = '0.5px';
          }
        }
      }
    }

    // TOOLTIP LOGIC
    const tooltip = document.getElementById('nn-tooltip');

    function showTooltip(e, layer, idx) {
      const n = window.vizNodes.find(x => x.layer === layer && x.idx === idx);
      const rect = n.el.getBoundingClientRect();
      // Adjust for fullscreen vs normal
      const isFS = document.getElementById('nnHero').classList.contains('fullscreen');
      const heroRect = isFS ? { top: 0, left: 0 } : document.querySelector('.nn-hero').getBoundingClientRect();

      const top = rect.top - heroRect.top - 40;
      const left = rect.left - heroRect.left - 20;

      // Get Bias
      let bias = 0;
      const weights = window.modelData;
      if (weights) {
        if (layer === 1) bias = weights[0].biases[idx];
        else if (layer === 2) bias = weights[1].biases[idx];
      }

      let content = '';
      if (layer === 0) {
        content = `Input Pixel [${idx}]\nValue: ${(n.val || 0).toFixed(2)}`;
      } else if (layer === 1) {
        content = `Hidden Neuron #${idx}\nActivation: ${(n.val || 0).toFixed(4)}\nBias: ${bias.toFixed(4)}`;
      } else {
        content = `Output Neuron #${idx}\nProbability: ${(n.val * 100 || 0).toFixed(2)}%\nBias: ${bias.toFixed(4)}`;
      }

      tooltip.innerHTML = content;
      tooltip.style.top = top + 'px';
      tooltip.style.left = left + 'px';
      tooltip.style.opacity = 1;
      tooltip.style.zIndex = 10000; // High Z for Fullscreen
    }

    function hideTooltip() { tooltip.style.opacity = 0; }

    // MOUNTAIN TIMELINE LOGIC
    function toggleExp(idx) {
      const card = document.getElementById('expInfoCard');
      const title = document.getElementById('expInfoTitle');
      const desc = document.getElementById('expInfoDesc');
      const peaks = document.querySelectorAll('.mountain-peak');

      const peak = peaks[idx];
      const pTitle = peak.getAttribute('data-title');
      const pDesc = peak.getAttribute('data-desc');

      title.innerText = pTitle;
      desc.innerText = pDesc;

      // Position Card
      const rect = peak.getBoundingClientRect();
      const containerRect = document.querySelector('.timeline-container').getBoundingClientRect();

      card.style.left = (rect.left - containerRect.left + rect.width / 4) + 'px';
      card.style.top = (rect.top - containerRect.top - 100) + 'px';

      // Toggle
      if (card.classList.contains('visible') && card.dataset.activeIdx == idx) {
        card.classList.remove('visible');
        card.dataset.activeIdx = -1;
      } else {
        card.classList.add('visible');
        card.dataset.activeIdx = idx;
      }
    }

    function initMountainAnimations() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const peaks = entry.target.querySelectorAll('.mountain-peak');
            peaks.forEach((peak, i) => {
              peak.style.transition = `all 1s cubic-bezier(0.165, 0.84, 0.44, 1) ${i * 0.2}s`;
              peak.style.transform = 'scaleY(1)';
              peak.style.opacity = peak.dataset.originalOpacity || 0.7;
            });
          }
        });
      }, { threshold: 0.2 });

      const section = document.querySelector('.mountain-experience');
      if (section) {
        // Initial state
        section.querySelectorAll('.mountain-peak').forEach(peak => {
          peak.dataset.originalOpacity = peak.style.opacity;
          peak.style.transform = 'scaleY(0)';
          peak.style.transformOrigin = 'bottom';
          peak.style.opacity = '0';
        });
        observer.observe(section);
      }
    }

    // ==========================================
    // EXPERIENCE VISUALIZATION FUNCTIONS
    // ==========================================

    const expData = [
      {
        title: "Open Source Contributor",
        meta: "2021-PRESENT",
        desc: "Actively contributing to various open source projects, improving code quality, fixing bugs, and adding new features. Focus on LLM tooling, LangChain adapters, and web performance optimization."
      },
      {
        title: "Product Engineer Associate I - UST",
        meta: "JULY 2024-PRESENT",
        desc: "Leading AI initiatives and developing enterprise-grade solutions for Fortune 500 clients. Managing multiple AI/ML projects focused on infrastructure automation, data insights, and intelligent monitoring systems."
      },
      {
        title: "InfraOps AI Agent",
        meta: "UST PROJECT",
        desc: "Designed and implemented an AI agent leveraging LLMs to monitor infrastructure health (uptime, CPU utilization, anomaly detection). Built automation features for remediation tasks with human-in-the-loop approval. Developed an interactive Streamlit UI with dynamic visualization graphs."
      },
      {
        title: "AI Insight Generator",
        meta: "UST PROJECT",
        desc: "Built an Excel-driven insight engine with schema extraction and DB storage. Used LLMs to generate SQL queries, summarize results, and recommend actions. Delivered streaming chat-style outputs with multi-agent support for different file types and dynamic graph generation."
      },
      {
        title: "Validation Module",
        meta: "UST PROJECT",
        desc: "Led a team to R&D and develop a plugin that sanitized sensitive data before AI model ingestion by masking and later demasking data using secure mapping, ensuring compliance and safety."
      },
      {
        title: "AI-Based Monitoring Automator",
        meta: "UST PROJECT",
        desc: "Developed an AI-driven monitoring system that decomposed user input into tasks, referenced SOPs/knowledge bases, and automated log analysis, anomaly detection, and root cause identification."
      }
    ];

    function switchViz(vizType) {
      // Update tabs
      document.querySelectorAll('.viz-tab').forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');

      // Update containers
      document.querySelectorAll('.viz-container').forEach(container => container.classList.remove('active'));
      if (vizType === 'nn') {
        document.getElementById('nnViz').classList.add('active');
      } else {
        document.getElementById('gitViz').classList.add('active');
      }

      // Hide info card when switching
      document.getElementById('expInfoCard').classList.remove('visible');
    }

    function showExpInfo(idx) {
      const card = document.getElementById('expInfoCard');
      const title = document.getElementById('expInfoTitle');
      const meta = document.getElementById('expInfoMeta');
      const desc = document.getElementById('expInfoDesc');

      const exp = expData[idx];
      title.innerText = exp.title;
      meta.innerText = exp.meta;
      desc.innerText = exp.desc;

      // Position card near click
      const event = window.event;
      if (event) {
        const section = document.querySelector('.experience-section');
        const rect = section.getBoundingClientRect();

        card.style.left = Math.min(event.clientX - rect.left, rect.width - 400) + 'px';
        card.style.top = (event.clientY - rect.top + 20) + 'px';
      }

      // Toggle visibility
      if (card.classList.contains('visible') && card.dataset.activeIdx == idx) {
        card.classList.remove('visible');
        card.dataset.activeIdx = -1;
      } else {
        card.classList.add('visible');
        card.dataset.activeIdx = idx;
      }
    }

    function initExpAnimations() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            // Animate NN nodes
            const nnNodes = entry.target.querySelectorAll('.nn-node');
            nnNodes.forEach((node, i) => {
              setTimeout(() => {
                node.style.transition = 'all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1)';
                node.style.transform = 'scale(1)';
                node.style.opacity = '1';
              }, i * 150);
            });

            // Animate connections
            const connections = entry.target.querySelectorAll('.nn-connection');
            connections.forEach((conn, i) => {
              setTimeout(() => {
                conn.style.transition = 'all 0.4s ease-out';
                conn.style.opacity = '0.3';
              }, 600 + i * 100);
            });
          }
        });
      }, { threshold: 0.2 });

      const section = document.querySelector('.experience-section');
      if (section) {
        // Initial state for NN nodes
        section.querySelectorAll('.nn-node').forEach(node => {
          node.style.transform = 'scale(0)';
          node.style.opacity = '0';
        });
        section.querySelectorAll('.nn-connection').forEach(conn => {
          conn.style.opacity = '0';
        });
        observer.observe(section);
      }
    }

    function initGitAnimations() {
      const svg = document.getElementById('gitSvg');
      const zoomGroup = document.getElementById('gitZoomGroup');
      if (!svg || !zoomGroup) return;

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            startGitAnimation();
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.3 });

      const container = document.getElementById('gitViz');
      if (container) observer.observe(container);
    }

    function startGitAnimation() {
      const svg = document.getElementById('gitSvg');
      svg.classList.add('zooming');

      const sequence = [
        { id: 'path-0', delay: 500 },
        { id: 'path-1', delay: 1500 },
        { id: 'path-2', delay: 2500 },
        { id: 'path-3', delay: 2800 },
        { id: 'path-4', delay: 3100 },
        { id: 'path-5', delay: 3400 }
      ];

      sequence.forEach(item => {
        const p = document.getElementById(item.id);
        if (p) {
          const len = p.getTotalLength();
          p.style.strokeDasharray = len;
          p.style.strokeDashoffset = len;

          setTimeout(() => {
            p.classList.add('git-path-anim');

            const nodeId = item.id.replace('path', 'node');
            const node = document.getElementById(nodeId);
            if (node) {
              setTimeout(() => {
                node.classList.add('git-node-anim');
              }, 1000);
            }
          }, item.delay);
        }
      });

      // Initial Open Source node
      const node0 = document.getElementById('node-0');
      if (node0) {
        node0.style.opacity = 0;
        setTimeout(() => node0.classList.add('git-node-anim'), 500);
      }
    }

    // THEME TOGGLE
    const themeBtn = document.getElementById('themeToggle');
    if (themeBtn) {
      themeBtn.onclick = () => {
        const current = document.documentElement.getAttribute('data-theme');
        const iconSun = document.getElementById('iconSun');
        const iconMoon = document.getElementById('iconMoon');

        if (current === 'light') {
          document.documentElement.removeAttribute('data-theme');
          iconSun.style.display = 'block';
          iconMoon.style.display = 'none';
        } else {
          document.documentElement.setAttribute('data-theme', 'light');
          iconSun.style.display = 'none';
          iconMoon.style.display = 'block';
        }
      };
    }

    // ==========================================
    // DEV LOGS INDEX DATA
    // ==========================================
    const devLogsIndexData = {
      categories: [
        {
          id: 'vim',
          number: '01',
          title: 'Vim',
          description: 'Efficient text editing, navigation, and customization for Vim editor.',
          topics: [
            { id: 'vim-01', title: 'Initial Configuration', status: 'complete' },
            { id: 'vim-02', title: 'The Buffer Workflow', status: 'complete' },
            { id: 'vim-03', title: 'Plugin Management (LSP)', status: 'complete' },
            { id: 'vim-04', title: 'Vim vs Neovim Features', status: 'wip' },
            { id: 'vim-05', title: 'Macros & Registers', status: 'complete' },
            { id: 'vim-06', title: 'Custom Keybindings', status: 'planned' },
            { id: 'vim-07', title: 'Text Objects Mastery', status: 'planned' },
            { id: 'vim-08', title: 'Command Mode Power', status: 'planned' }
          ]
        },
        {
          id: 'git',
          number: '02',
          title: 'Git',
          description: 'Version control workflows, branching strategies, and advanced Git operations.',
          topics: [
            { id: 'git-01', title: 'Everyday Feature Flow', status: 'complete' },
            { id: 'git-02', title: 'Interactive Rebase Mastery', status: 'complete' },
            { id: 'git-03', title: 'Resolving Upstream Conflicts', status: 'complete' },
            { id: 'git-04', title: 'Cherry-picking Strategies', status: 'wip' },
            { id: 'git-05', title: 'Bisect for Debugging', status: 'planned' },
            { id: 'git-06', title: 'Git Hooks Automation', status: 'planned' }
          ]
        },
        {
          id: 'redis',
          number: '03',
          title: 'Redis',
          description: 'In-memory data structures, caching patterns, and pub/sub messaging.',
          topics: [
            { id: 'redis-01', title: 'Caching Design Patterns', status: 'complete' },
            { id: 'redis-02', title: 'Pub/Sub Implementation', status: 'complete' },
            { id: 'redis-03', title: 'Persistence Strategies', status: 'complete' },
            { id: 'redis-04', title: 'Redis Cluster Setup', status: 'complete' },
            { id: 'redis-05', title: 'Lua Scripting', status: 'wip' },
            { id: 'redis-06', title: 'Redis Streams', status: 'planned' }
          ]
        },
        {
          id: 'docker',
          number: '04',
          title: 'Docker',
          description: 'Containerization, multi-stage builds, and orchestration fundamentals.',
          topics: [
            { id: 'docker-01', title: 'Multi-Stage Builds', status: 'complete' },
            { id: 'docker-02', title: 'Container Networking', status: 'complete' },
            { id: 'docker-03', title: 'Layer Optimization', status: 'complete' },
            { id: 'docker-04', title: 'Docker Compose Pro Tips', status: 'complete' },
            { id: 'docker-05', title: 'Volumes & Persistence', status: 'complete' },
            { id: 'docker-06', title: 'Docker Swarm Basics', status: 'wip' },
            { id: 'docker-07', title: 'Custom Images', status: 'complete' },
            { id: 'docker-08', title: 'Security Best Practices', status: 'planned' }
          ]
        },
        {
          id: 'distributed',
          number: '05',
          title: 'Distributed Systems',
          description: 'Theoretical foundations of distributed computing and consensus algorithms.',
          topics: [
            { id: 'ds-01', title: 'CAP Theorem Foundations', status: 'complete' },
            { id: 'ds-02', title: 'Paxos Consensus Algorithm', status: 'complete' },
            { id: 'ds-03', title: 'The Raft Protocol', status: 'complete' },
            { id: 'ds-04', title: 'Byzantine Fault Tolerance', status: 'complete' },
            { id: 'ds-05', title: 'Vector Clocks & Causality', status: 'complete' },
            { id: 'ds-06', title: 'Consistent Hashing Layers', status: 'complete' },
            { id: 'ds-07', title: 'Gossip Protocols in Mesh', status: 'complete' },
            { id: 'ds-08', title: 'Quorum Consistency Models', status: 'complete' },
            { id: 'ds-09', title: 'Two-Phase Commit Issues', status: 'complete' },
            { id: 'ds-10', title: 'Distributed Locking ZooKeeper', status: 'wip' },
            { id: 'ds-11', title: 'Log-Structured Storage', status: 'wip' },
            { id: 'ds-12', title: 'LSM Trees Performance', status: 'wip' },
            { id: 'ds-13', title: 'Bloom Filters Optimization', status: 'planned' },
            { id: 'ds-14', title: 'Write-Ahead Logging (WAL)', status: 'planned' },
            { id: 'ds-15', title: 'Anti-Entropy Mechanisms', status: 'planned' },
            { id: 'ds-16', title: 'Sharding & Partitioning', status: 'planned' },
            { id: 'ds-17', title: 'Availability vs Latency', status: 'planned' },
            { id: 'ds-18', title: 'CRDT Architecture', status: 'planned' },
            { id: 'ds-19', title: 'Leaderless Replication', status: 'planned' },
            { id: 'ds-20', title: 'Eventual Consistency Flow', status: 'planned' }
          ]
        },
        {
          id: 'k8s',
          number: '06',
          title: 'Kubernetes',
          description: 'Container orchestration, deployment strategies, and cluster management.',
          topics: [
            { id: 'k8s-01', title: 'kubectl Debug Plugins', status: 'complete' },
            { id: 'k8s-02', title: 'Kustomize Overlays', status: 'complete' },
            { id: 'k8s-03', title: 'Helm Charts v3', status: 'complete' },
            { id: 'k8s-04', title: 'Resource Limits & Requests', status: 'wip' },
            { id: 'k8s-05', title: 'Ingress Controllers', status: 'planned' },
            { id: 'k8s-06', title: 'StatefulSets Deep Dive', status: 'planned' }
          ]
        },
        {
          id: 'aws',
          number: '07',
          title: 'AWS Serverless',
          description: 'Serverless architecture, event-driven systems, and cloud-native patterns.',
          topics: [
            { id: 'aws-01', title: 'AWS Lambda Layers', status: 'complete' },
            { id: 'aws-02', title: 'EventBridge Bus Flow', status: 'complete' },
            { id: 'aws-03', title: 'SQS Dead Letter Queues', status: 'complete' },
            { id: 'aws-04', title: 'API Gateway Patterns', status: 'wip' },
            { id: 'aws-05', title: 'Step Functions Workflows', status: 'planned' },
            { id: 'aws-06', title: 'Cognito Integration', status: 'planned' }
          ]
        },
        {
          id: 'llmops',
          number: '08',
          title: 'LLM Ops',
          description: 'Large Language Model operations, deployment, and optimization.',
          topics: [
            { id: 'llmops-01', title: 'Vector Embedding Flow', status: 'complete' },
            { id: 'llmops-02', title: 'Semantic Search', status: 'complete' },
            { id: 'llmops-03', title: 'Prompt Versioning', status: 'complete' },
            { id: 'llmops-04', title: 'RAG Implementation', status: 'wip' },
            { id: 'llmops-05', title: 'Fine-tuning Strategies', status: 'planned' },
            { id: 'llmops-06', title: 'Model Serving & Scaling', status: 'planned' }
          ]
        },
        {
          id: 'linux',
          number: '09',
          title: 'Linux Internals',
          description: 'Linux operating system internals, kernel concepts, and system administration.',
          topics: [
            { id: 'linux-01', title: 'BASH Scripting Habits', status: 'complete' },
            { id: 'linux-02', title: 'Systemd Service Units', status: 'complete' },
            { id: 'linux-03', title: 'Process Management', status: 'wip' },
            { id: 'linux-04', title: 'File System Hierarchy', status: 'planned' },
            { id: 'linux-05', title: 'Network Configuration', status: 'planned' },
            { id: 'linux-06', title: 'System Monitoring', status: 'planned' }
          ]
        },
        {
          id: 'python',
          number: '10',
          title: 'Python',
          description: 'Python programming, frameworks, and advanced language features.',
          topics: [
            { id: 'python-01', title: 'FastAPI Performance', status: 'complete' },
            { id: 'python-02', title: 'Generators & Iterators', status: 'complete' },
            { id: 'python-03', title: 'Async/Await Patterns', status: 'wip' },
            { id: 'python-04', title: 'Type Hints Best Practices', status: 'planned' },
            { id: 'python-05', title: 'Decorators Deep Dive', status: 'planned' },
            { id: 'python-06', title: 'Context Managers', status: 'planned' }
          ]
        },
        {
          id: 'rust',
          number: '11',
          title: 'Rust',
          description: 'Systems programming with Rust, ownership, and memory safety.',
          topics: [
            { id: 'rust-01', title: 'Borrow Checker Internals', status: 'complete' },
            { id: 'rust-02', title: 'Ownership & Scoping', status: 'complete' },
            { id: 'rust-03', title: 'Safe Parallelism', status: 'complete' },
            { id: 'rust-04', title: 'Lifetimes in Depth', status: 'wip' },
            { id: 'rust-05', title: 'Traits & Generics', status: 'planned' },
            { id: 'rust-06', title: 'Error Handling Patterns', status: 'planned' },
            { id: 'rust-07', title: 'Unsafe Rust', status: 'planned' },
            { id: 'rust-08', title: 'Async Rust with Tokio', status: 'planned' }
          ]
        }
      ]
    };

    // Render Dev Logs Index
    function renderDevLogsIndex() {
      const grid = document.getElementById('categoriesGrid');
      if (!grid) return;

      grid.innerHTML = devLogsIndexData.categories.map(cat => `
        <div class="category-index-card">
          <div class="category-number">${cat.number}</div>
          <h3 class="category-name">${cat.title}</h3>
          <p class="category-description">${cat.description}</p>

          <ul class="topic-preview-list">
            ${cat.topics.slice(0, 4).map((topic, index) => `
              <li class="topic-preview-item">
                <span class="topic-number">${cat.number}.${String(index + 1).padStart(2, '0')}</span>
                <span class="topic-name">${topic.title}</span>
                <span class="topic-status ${topic.status}">${topic.status}</span>
              </li>
            `).join('')}
            ${cat.topics.length > 4 ? `
              <li class="topic-preview-item" style="opacity: 0.7;">
                <span class="topic-number">...</span>
                <span class="topic-name">+ ${cat.topics.length - 4} more topics</span>
              </li>
            ` : ''}
          </ul>
        </div>
      `).join('');
    }

    // ==========================================
    // BLOGS DATA
    // ==========================================
    const blogsData = {
      featured: {
        id: 'blog-featured',
        title: 'The Future of AI-Powered Development',
        category: 'Technical',
        excerpt: 'Exploring how Large Language Models are transforming the way we write, debug, and architect software systems. A deep dive into the next generation of development tools.',
        date: 'Jan 15, 2025',
        readTime: '12 min read',
        image: '/images/blog-featured.png'
      },
      categories: [
        {
          id: 'thoughts',
          name: 'Thoughts',
          count: 3,
          posts: [
            {
              id: 'blog-01',
              title: 'Why I Stopped Using Traditional IDEs',
              excerpt: 'After years of fighting with bloated IDEs, I discovered the beauty of minimal, text-based development environments and never looked back.',
              category: 'Thoughts',
              date: 'Dec 28, 2024',
              readTime: '8 min read'
            },
            {
              id: 'blog-02',
              title: 'The Art of Simple Code',
              excerpt: 'Complexity is often a sign of poor design. Here are some principles I follow to keep my code maintainable and elegant.',
              category: 'Thoughts',
              date: 'Nov 12, 2024',
              readTime: '6 min read'
            },
            {
              id: 'blog-03',
              title: 'Learning in Public vs Private',
              excerpt: 'The benefits of building projects openly: faster feedback, community growth, and unexpected opportunities.',
              category: 'Thoughts',
              date: 'Oct 5, 2024',
              readTime: '10 min read'
            }
          ]
        },
        {
          id: 'technical',
          name: 'Technical',
          count: 3,
          posts: [
            {
              id: 'blog-04',
              title: 'Building a Real-Time LLM Chat Interface',
              excerpt: 'A step-by-step guide to creating a performant, real-time chat application powered by streaming Large Language Model responses.',
              category: 'Technical',
              date: 'Jan 8, 2025',
              readTime: '15 min read'
            },
            {
              id: 'blog-05',
              title: 'Optimizing Redis Caching Strategies',
              excerpt: 'Advanced techniques for cache invalidation, memory management, and scaling Redis in production environments.',
              category: 'Technical',
              date: 'Dec 20, 2024',
              readTime: '12 min read'
            },
            {
              id: 'blog-06',
              title: 'From Monolith to Microservices',
              excerpt: 'Lessons learned from breaking down a large application into microservices: the good, the bad, and the ugly.',
              category: 'Technical',
              date: 'Nov 30, 2024',
              readTime: '18 min read'
            }
          ]
        },
        {
          id: 'stories',
          name: 'Stories',
          count: 2,
          posts: [
            {
              id: 'blog-07',
              title: 'My First Production Incident',
              excerpt: 'The story of how I accidentally deleted production data, the panic that followed, and the automated backups that saved my reputation.',
              category: 'Stories',
              date: 'Sep 15, 2024',
              readTime: '7 min read'
            },
            {
              id: 'blog-08',
              title: 'The Conference That Changed My Career',
              excerpt: 'How attending a small tech conference led to unexpected connections, job offers, and a complete shift in my professional trajectory.',
              category: 'Stories',
              date: 'Aug 22, 2024',
              readTime: '14 min read'
            }
          ]
        }
      ]
    };

    // Render Featured Blog
    function renderFeaturedBlog() {
      const container = document.getElementById('featuredBlog');
      if (!container) return;

      const featured = blogsData.featured;
      container.innerHTML = `
        <div class="featured-blog-image">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <path d="M8 12h8M12 8v8"/>
          </svg>
        </div>
        <div class="featured-blog-content">
          <div class="featured-blog-tag">${featured.category}</div>
          <h3 class="featured-blog-title">${featured.title}</h3>
          <p class="featured-blog-excerpt">${featured.excerpt}</p>
          <div class="featured-blog-meta">
            <div class="date">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="12" y1="6" x2="12" y2="9"/>
              </svg>
              <span>${featured.date}</span>
            </div>
            <div class="read-time">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
              <span>${featured.readTime}</span>
            </div>
          </div>
          <a href="#blog-${featured.id}" class="read-link">
            <span>Read Article</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </a>
        </div>
      `;
    }

    // Render Blogs Grid
    function renderBlogsGrid(filter = 'all') {
      const grid = document.getElementById('blogsGrid');
      if (!grid) return;

      let allPosts = [];
      if (filter === 'all') {
        allPosts = blogsData.categories.flatMap(cat => cat.posts);
      } else {
        const category = blogsData.categories.find(cat => cat.id === filter);
        allPosts = category ? category.posts : [];
      }

      grid.innerHTML = allPosts.map(post => `
        <div class="blog-card" data-category="${post.category}">
          <div class="blog-tag">${post.category}</div>
          <h3 class="blog-title">${post.title}</h3>
          <p class="blog-excerpt">${post.excerpt}</p>
          <div class="blog-meta">
            <div class="date">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="12" y1="6" x2="12" y2="9"/>
              </svg>
              <span>${post.date}</span>
            </div>
            <div class="read-time">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
              <span>${post.readTime}</span>
            </div>
          </div>
          <a href="#blog-${post.id}" class="blog-link">
            <span>Read</span>
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </a>
        </div>
      `).join('');
    }

    // Blog Filter Click Handler
    function initBlogFilters() {
      const filters = document.getElementById('blogFilters');
      if (!filters) return;

      filters.addEventListener('click', (e) => {
        const btn = e.target.closest('.blog-filter-btn');
        if (!btn) return;
        document.querySelectorAll('.blog-filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderBlogsGrid(btn.dataset.filter);
      });
    }

    // Run Init
    window.addEventListener('load', () => {
      if (typeof initRealNN === 'function') initRealNN();
      if (typeof markovAnimation !== 'undefined') markovAnimation.start();
      initExpAnimations();
      initGitAnimations();

      // Render New Sections
      renderDevLogsIndex();
      renderFeaturedBlog();
      renderBlogsGrid();
      initBlogFilters();
    });
  </script>
</body>

</html>